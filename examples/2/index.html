<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Title</title>
        <style>
            body {
                margin: 0;
                padding: 0;
                background: #ddd;
            }

            .container {
                position: relative;
                width: 800px;
                height: 400px;
                margin: 10px auto;
                background: #fff;
                border: thin inset rgba(100,150,230,0.5);
            }

            #readout {
                margin-top: 10px;
                margin-left: 15px;
                color: blue;
            }
        </style>
        <script type="text/javascript" src="../../build/source/ig-all.js"></script>
    </head>
    <body>
        <div class="show-frame">帧数：123</div>
        <div class="container">
            <canvas id='canvas' width='800' height='400'></canvas>
        </div>
        <script>

            // var imageLoader = new ig.ImageLoader();
            // imageLoader.addImage([
            //     './img/mute_35x35.png',
            //     './img/thinNumbers_25x32.png',
            //     './img/fatNumbers_33x41.png',
            //     './img/pop_156x141.png',
            //     './img/dots_64x86.png',
            //     './img/panels_383x550.png',
            //     './img/quitBut.png',
            //     './img/playBut.png',
            //     './img/hud.png',
            //     './img/rotateDeviceMessage.jpg',
            //     './img/bg.jpg',
            //     './img/sprite-sheet-test.png',
            //     './img/sprite-sheet-test1.png',
            //     './img/sprite-sheet-test2.png',
            //     './img/sprite-sheet-test3.jpg',
            //     './img/sprite-sheet-test4.png',
            //     './img/sprite-sheet-test5.png',
            //     './img/sprite-sheet-test6.png',
            //     './img/sprite-sheet-test7.jpg',
            //     './img/sprite-sheet-test8.png',
            // ]);

            // var interval = setInterval(function (e) {
            //     var percent = imageLoader.loadImages();
            //     console.warn(percent.toFixed());

            //     if (percent >= 100) {
            //         clearInterval(interval);
            //     }
            // }, 16);

            var canvas = document.querySelector('#canvas');
            var ctx = canvas.getContext('2d');

            var showFrameNode = document.querySelector('.show-frame');

            var g = new ig.Game();

            g.on('Game:afterRender', function (data) {
                showFrameNode.innerHTML = ''
                    + '当前帧数：' + data.data.curFrame
            });

            var stage = g.createStage({
                width: 1000,
                height: 500,
                // containerBgColor: 'rgba(255, 0, 0, .1)',
                // containerBgColor: '#fff',
                containerBgColor: 'white',
                canvas: document.querySelector('#canvas')
            });

            // stage.on('Stage:beforeRender', function (data) {
            //     console.log('Stage:beforeRender');
            // });

            // stage.on('Stage:beforeRender', function (data) {
            //     console.log('Stage:afterRender');
            // });

            var ballCount = 55;
            for (var i = 0; i < ballCount; i++) {
                var obj = new ig.Shape.Ball({
                    name: i,
                    r: 10
                });
                obj.move(ig.util.randomInt(20, 400), ig.util.randomInt(20, 300));
                obj.vX = ig.util.randomInt(5, 10);
                obj.vY = ig.util.randomInt(5, 10);
                // obj.color = 'red';
                obj.color = ''
                    + 'rgba('
                    + ig.util.randomInt(0, 255)
                    + ','
                    + ig.util.randomInt(0, 255)
                    + ','
                    + ig.util.randomInt(0, 255)
                    + ', '
                    + ig.util.randomFloat(1, 1)
                    + ')';
                stage.addDisplayObject(obj);

                // obj.on('DisplayObject:render', function (data) {
                //     console.log('DisplayObject:render', data);
                // });
            }

            g.start();

            // setTimeout(function () {
            //     g.getCurrentStage().setContainerBgColor('#000');
            //     setTimeout(function () {
            //         g.getCurrentStage().setContainerBgImg('./img/bg.jpg', 'full');
            //         setTimeout(function () {
            //             g.getCurrentStage().setContainerBgImg('./img/bg1.jpg', 'full');
            //             setTimeout(function () {
            //                 g.pause();
            //             }, 3000);
            //         }, 3000);
            //     }, 3000)
            // }, 3000);

        </script>
    </body>
</html>
