<!DOCTYPE html>
<html lang="en">
    <head>
        <title>stage</title>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="HandheldFriendly" content="True">
        <meta name="MobileOptimized" content="320">
        <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no, minimal-ui">
        <meta name="format-detection" content="telephone=no">
        <meta name="apple-mobile-web-app-capable" content="yes"/>
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <meta name="full-screen" content="true"/>
        <meta name="screen-orientation" content="portrait"/>
        <meta name="x5-fullscreen" content="true"/>
        <meta name="360-fullscreen" content="true"/>

        <script type="text/javascript" src="../../build/source/ig-all.js"></script>
        <style type="text/css">
            canvas {
                border: 1px solid #ddd;
            }
            #fps {
                  position: absolute;
                  z-index: 10000;
                  top: 5px;
                  left: 5px;
            }
        </style>
    </head>
    <body>
        <div id="fps"></div>
        <canvas id="canvas"></canvas>
        <script>
            var canvas = document.querySelector('#canvas');
            var ctx = canvas.getContext('2d');

            var game = new ig.Game({
                fps: 30,
                name: 'game1'
            });

            game.init({
                canvas: canvas
                , maximize: true
                , scaleFit: true
                // , pageScroll: true
                // , width: 200
                // , height: 200
                // , maxHeight: 100
                // , maxWidth: 100
            });

            ig.loadResource(
                [
                    {
                        id: 'bg',
                        src: './img/bg.jpg'
                    },
                    {
                        id: 'bg1',
                        src: './img/700*700-1.jpeg'
                    },
                    {
                        id: 'bg2',
                        src: './img/bg2.jpg'
                    }
                ],
                function (resource) {
                    game.createStage({
                        name: 'bg'
                    // }).setBgImg(resource.bg.src, 'full');
                    // }).setBgColor('green');
                    }).setParallaxScroll({
                        image: resource.bg
                        // , aX: 1
                        // , aY: 1
                        , anims: [
                            {
                                aX: 1
                                , aY: 1
                            },
                            {
                                aX: -1
                                , aY: 1
                            }
                        ]
                        , animInterval: 1000 // 切换 parallax 的间隔，这里指的是帧数间隔
                    });

                    game.createStage({
                        name: 'bg1'
                    // }).setBgColor('red');
                    }).setBgImg(resource.bg1, 'full');
                    // }).setParallaxScroll({
                    //     image: resource.bg1
                    //     // , aX: 1
                    //     // , aY: 1
                    //     , anims: [
                    //         {
                    //             aX: 1
                    //             , aY: 1
                    //         },
                    //         {
                    //             aX: -1
                    //             , aY: 1
                    //         }
                    //     ]
                    //     , animInterval: 1000 // 切换 parallax 的间隔，这里指的是帧数间隔
                    // });

                    game.createStage({
                        name: 'bg2'
                    // }).setBgColor('green');
                    // }).setBgImg(resource.bg2, 'full');
                    }).setParallaxScroll({
                        image: resource.bg2
                        // , aX: 1
                        // , aY: 1
                        , anims: [
                            {
                                aX: 1
                                , aY: 1
                            },
                            {
                                aX: -1
                                , aY: 1
                            }
                        ]
                        , animInterval: 1000 // 切换 parallax 的间隔，这里指的是帧数间隔
                    });

                    game.createStage({
                        name: 'bg3'
                    }).setBgColor('green');
                    // }).setBgImg(resource.bg2, 'full');
                    // }).setParallaxScroll({
                    //     image: resource.bg2
                    //     // , aX: 1
                    //     // , aY: 1
                    //     , anims: [
                    //         {
                    //             aX: 1
                    //             , aY: 1
                    //         },
                    //         {
                    //             aX: -1
                    //             , aY: 1
                    //         }
                    //     ]
                    //     , animInterval: 1000 // 切换 parallax 的间隔，这里指的是帧数间隔
                    // });

                    game.start('bg', function () {
                        console.log('startCallback');
                    })
                    .on('gameFPS', function (data) {
                        document.querySelector('#fps').innerHTML = 'fps: '+ data.data.fps;
                    })

                    setTimeout(function () {
                        // game.swapStage(0, 1);
                        game.changeStage('bg1');
                        setTimeout(function () {
                            game.changeStage('bg2');
                            setTimeout(function () {
                                game.changeStage('bg3');
                            }, 3000);
                        }, 3000);
                    }, 3000);
                },
                {
                    processCallback: function () {
                        // console.warn('process', arguments);
                    }
                }
            );
        </script>
    </body>
</html>
