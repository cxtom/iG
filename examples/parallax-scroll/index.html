<!DOCTYPE html>
<html lang="en">
    <head>
        <title>parallax-scroll</title>
        <meta charset="utf-8">
        <!-- <meta name="viewport" content="width=640, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0"/> -->
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="HandheldFriendly" content="True">
        <meta name="MobileOptimized" content="320">
        <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no, minimal-ui">
        <meta name="format-detection" content="telephone=no">
        <!-- <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no, target-densitydpi=device-dpi"/> -->
        <!-- <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no,width=device-width,minimal-ui"> -->
        <meta name="apple-mobile-web-app-capable" content="yes"/>
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <meta name="full-screen" content="true"/>
        <meta name="screen-orientation" content="portrait"/>
        <meta name="x5-fullscreen" content="true"/>
        <meta name="360-fullscreen" content="true"/>

        <script type="text/javascript" src="../../build/source/ig-all.js"></script>
        <style type="text/css">
            canvas {
                border: 1px solid #ddd;
            }
            #fps {
                  position: absolute;
                  z-index: 10000;
                  top: 5px;
                  left: 5px;
            }
        </style>
    </head>
    <body>
        <div id="fps"></div>
        <canvas id="canvas"></canvas>
        <script>
            var canvas = document.querySelector('#canvas');
            var ctx = canvas.getContext('2d');

            var game = new ig.Game({
                fps: 30,
                name: 'game1'
            });

            game.init({
                canvas: canvas
                , maximize: true
                , scaleFit: true
                // , pageScroll: true
                // , width: 200
                // , height: 200
                // , maxHeight: 100
                // , maxWidth: 100
            });

            // game.createStage({
            //     name: 'stage2'
            // });

            ig.loadResource(
                {
                    id: 'bg',
                    src: './img/bg.jpg'
                },
                function (resource) {
                    game.createStage({
                        name: 'stage1'
                    // }).setBgImg(resource.bg.src, 'full');
                    // }).setBgColor('red');
                    }).setParallaxScroll({
                        image: resource.bg
                        , aX: 1
                        , aY: 1
                    });

                    game.start(function () {
                        console.log('startCallback');
                    })
                    .on('gameFPS', function (data) {
                        document.querySelector('#fps').innerHTML = 'fps: '+ data.data.fps;
                    })
                    // .on('beforeGameRender', function (data) {
                    //     // console.warn('beforeGameRender');
                    // });
                    // console.warn(game);


                    // game.start(function (data) {
                    //     console.warn('startCallback');
                    // }).on('gameFPS', function (data) {
                    //     console.warn('realFps: '+ data.data.fps);
                    // }).on('afterGameRender', function (data) {
                    //     console.warn('afterGameRender');
                    // });
                    // game.setBgImg(resource.bg.src, 'full');
                    // game.setBgColor('red');
                    // console.warn(resource);
                    // console.log('all done');
                },
                {
                    processCallback: function () {
                        // console.warn('process', arguments);
                    }
                }
            );
        </script>
    </body>
</html>
