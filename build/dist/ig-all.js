!function(t){var e,n;!function(){function t(t,e){if(!e)return t;if(0===t.indexOf(".")){var n=e.split("/"),i=t.split("/"),r=n.length-1,a=i.length,s=0,o=0;t:for(var c=0;a>c;c++)switch(i[c]){case"..":if(!(r>s))break t;s++,o++;break;case".":o++;break;default:break t}return n.length=r-s,i=i.slice(o),n.concat(i).join("/")}return t}function i(e){function n(n,s){if("string"==typeof n){var o=i[n];return o||(o=a(t(n,e)),i[n]=o),o}n instanceof Array&&(s=s||function(){},s.apply(this,r(n,s,e)))}var i={};return n}function r(n,i,r){for(var o=[],c=s[r],u=0,h=Math.min(n.length,i.length);h>u;u++){var l,f=t(n[u],r);switch(f){case"require":l=c&&c.require||e;break;case"exports":l=c.exports;break;case"module":l=c;break;default:l=a(f)}o.push(l)}return o}function a(t){var e=s[t];if(!e)throw new Error("No "+t);if(!e.defined){var n=e.factory,i=n.apply(this,r(e.deps||[],n,t));"undefined"!=typeof i&&(e.exports=i),e.defined=1}return e.exports}var s={};n=function(t,e,n){s[t]={id:t,deps:e,factory:n,defined:0,exports:{},require:i(t)}},e=i("")}(),n("ig",["ig/ig"],function(t){return t}),n("ig/ig",["require"],function(){"use strict";window.requestAnimationFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(t){var e,n,i=this;setTimeout(function(){e=+new Date,t(e),n=+new Date,i.timeout=1e3/60-(n-e)},i.timeout)}}(),window.cancelAnimationFrame=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelAnimationFrame||window.mozCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.msCancelRequestAnimationFrame||window.oCancelAnimationFrame||window.oCancelRequestAnimationFrame||window.clearTimeout}();var t={};return t}),n("ig/util",["require"],function(){"use strict";var t=Math.PI/180,e=180/Math.PI,n=Object.prototype,i={};return i.noop=function(){},i.extend=function(t,e){for(var n=1,i=arguments.length;i>n;n++)if(e=arguments[n])for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t},i.inherits=function(t,e){var n=function(){};n.prototype=e.prototype;var i=t.prototype,r=t.prototype=new n;for(var a in i)r[a]=i[a];return t.prototype.constructor=t,t.superClass=e.prototype,t},i.deg2Rad=function(e){return e*t},i.rad2Deg=function(t){return t*e},i.window2Canvas=function(t,e,n){var i=t.getBoundingClientRect();return{x:Math.round(e-i.left*(t.width/i.width)),y:Math.round(n-i.top*(t.height/i.height))}},i.fastApply=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2]);case 4:return t.call(e,n[0],n[1],n[2],n[3]);case 5:return t.call(e,n[0],n[1],n[2],n[3],n[4]);case 6:return t.call(e,n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return t.call(e,n[0],n[1],n[2],n[3],n[4],n[5],n[6]);case 8:return t.call(e,n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7]);case 9:return t.call(e,n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8]);default:return t.apply(e,n)}},i.removeArrByCondition=function(t,e){for(var n,i=-1,r=0,a=t.length;a>r;r++)if(n=t[r],e(n)){i=r;break}-1!==i&&t.splice(i,1)},i.parseColor=function(t,e){return e===!0?"number"==typeof t?0|t:("string"==typeof t&&"#"===t[0]&&(t=t.slice(1)),parseInt(t,16)):("number"==typeof t&&(t="#"+("00000"+(0|t).toString(16)).substr(-6)),t)},i.colorToRGB=function(t,e){"string"==typeof t&&"#"===t[0]&&(t=window.parseInt(t.slice(1),16)),e=void 0===e?1:e;var n=t>>16&255,i=t>>8&255,r=255&t,a=0>e?0:e>1?1:e;return 1===a?"rgb("+n+","+i+","+r+")":"rgba("+n+","+i+","+r+","+a+")"},i.randomInt=function(t,e){return Math.floor(Math.random()*e+t)},i.randomFloat=function(t,e){return Math.random()*(e-t)+t},i.domWrap=function(t,e,n){return t.parentNode.insertBefore(e,t),e.appendChild(t),e.id=n,t},i.getType=function(t){var e=n.toString.call(t),i=/\[object (\w+)\]/.exec(e);return i[1].toLowerCase()},i.getMouseCoords=function(t,e){var n=t.getBoundingClientRect(),i=n.top,r=n.bottom,a=n.left,s=n.right,o=getComputedStyle(t,null);if(o){var c=parseInt(o.getPropertyValue("border-top-width"),10),u=parseInt(o.getPropertyValue("border-right-width"),10),h=parseInt(o.getPropertyValue("border-bottom-width"),10),l=parseInt(o.getPropertyValue("border-left-width"),10);a+=l,s-=u,i+=c,r-=h}var f={};f.x=e.clientX-a,f.y=e.clientY-i;var d=s-a;if(t.width!==d){var g=r-i;f.x=f.x*(t.width/d),f.y=f.y*(t.height/g)}return f},i.captureMouse=function(t){var e={x:0,y:0,event:null},n=document.body.scrollLeft,i=document.documentElement.scrollLeft,r=document.body.scrollTop,a=document.documentElement.scrollTop,s=t.offsetLeft,o=t.offsetTop;return t.addEventListener("mousemove",function(t){var c,u;t.pageX||t.pageY?(c=t.pageX,u=t.pageY):(c=t.clientX+n+i,u=t.clientY+r+a),c-=s,u-=o,e.x=c,e.y=u,e.event=t,console.warn(e)},!1),e},i.captureTouch=function(t){var e={x:null,y:null,isPressed:!1,event:null},n=document.body.scrollLeft,r=document.documentElement.scrollLeft,a=document.body.scrollTop,s=document.documentElement.scrollTop,o=t.offsetLeft,c=t.offsetTop;return t.addEventListener("touchstart",function(t){e.isPressed=!0,e.event=t,console.warn(e,"touchstart")},!1),t.addEventListener("touchend",function(t){e.isPressed=!1,e.x=null,e.y=null,e.event=t,console.warn(e,"touchend")},!1),t.addEventListener("touchmove",function(t){var u,h,l=t.touches[0];l.pageX||l.pageY?(u=l.pageX,h=l.pageY):(u=l.clientX+n+r,h=l.clientY+a+s),u-=o,h-=c,e.x=u,e.y=h,e.event=t,console.log(i.getMouseCoords(e.event.target,l))},!1),e},i.getElementOffset=function(t){for(var e=t.offsetLeft,n=t.offsetTop;(t=t.offsetParent)&&t!=document.body&&t!=document;)e+=t.offsetLeft,n+=t.offsetTop;return{x:e,y:n}},i}),n("ig/Event",["require"],function(){"use strict";function t(){this._events={}}var e="_observerGUID";return t.prototype={constructor:t,on:function(t,n){this._events||(this._events={});var i=this._events[t];return i||(i=this._events[t]=[]),n.hasOwnProperty(e)||(n[e]=+new Date),i.push(n),this},un:function(t,e){if(this._events){if(!e)return void(this._events[t]=[]);var n=this._events[t];if(n)for(var i=0;i<n.length;i++)n[i]===e&&(n.splice(i,1),i--);return this}},fire:function(t,n){1===arguments.length&&"object"==typeof t&&(n=t,t=n.type);var i=this["on"+t];if("function"==typeof i&&i.call(this,n),this._events){null==n&&(n={}),"[object Object]"!==Object.prototype.toString.call(n)&&(n={data:n}),n.type=t,n.target=this;var r={},a=this._events[t];if(a){a=a.slice();for(var s=0;s<a.length;s++){var o=a[s];r.hasOwnProperty(o[e])||o.call(this,n)}}if("*"!==t){var c=this._events["*"];if(!c)return;c=c.slice();for(var s=0;s<c.length;s++){var o=c[s];r.hasOwnProperty(o[e])||o.call(this,n)}}}},enable:function(e){e._events={},e.on=t.prototype.on,e.un=t.prototype.un,e.fire=t.prototype.fire}},t}),n("ig/env",["require"],function(){"use strict";function t(t){var e={},n={},i=t.match(/Web[kK]it[\/]{0,1}([\d.]+)/),r=t.match(/(Android);?[\s\/]+([\d.]+)?/),a=!!t.match(/\(Macintosh\; Intel /),s=t.match(/(iPad).*OS\s([\d_]+)/),o=t.match(/(iPod)(.*OS\s([\d_]+))?/),c=!s&&t.match(/(iPhone\sOS)\s([\d_]+)/),u=t.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),h=t.match(/Windows Phone ([\d.]+)/),l=u&&t.match(/TouchPad/),f=t.match(/Kindle\/([\d.]+)/),d=t.match(/Silk\/([\d._]+)/),g=t.match(/(BlackBerry).*Version\/([\d.]+)/),p=t.match(/(BB10).*Version\/([\d.]+)/),v=t.match(/(RIM\sTablet\sOS)\s([\d.]+)/),m=t.match(/PlayBook/),y=t.match(/Chrome\/([\d.]+)/)||t.match(/CriOS\/([\d.]+)/),w=t.match(/Firefox\/([\d.]+)/),b=t.match(/MSIE\s([\d.]+)/)||t.match(/Trident\/[\d](?=[^\?]+).*rv:([0-9.].)/),x=!y&&t.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/),S=x||t.match(/Version\/([\d.]+)([^S](Safari)|[^M]*(Mobile)[^S]*(Safari))/),I=t.match(/MicroMessenger\/([\d.]+)/),O=t.match(/baiduboxapp\/[^\/]+\/([\d.]+)_/)||t.match(/baiduboxapp\/([\d.]+)/)||t.match(/BaiduHD\/([\d.]+)/)||t.match(/FlyFlow\/([\d.]+)/)||t.match(/baidubrowser\/([\d.]+)/),C=t.match(/MQQBrowser\/([\d.]+)/)||t.match(/QQ\/([\d.]+)/),M=t.match(/UCBrowser\/([\d.]+)/),k=t.match(/SogouMobileBrowser\/([\d.]+)/),P=r&&t.match(/MiuiBrowser\/([\d.]+)/),E=t.match(/LBKIT/),X=t.match(/Mercury\/([\d.]+)/);return(n.webkit=!!i)&&(n.version=i[1]),r&&(e.android=!0,e.version=r[2]),c&&!o&&(e.ios=e.iphone=!0,e.version=c[2].replace(/_/g,".")),s&&(e.ios=e.ipad=!0,e.version=s[2].replace(/_/g,".")),o&&(e.ios=e.ipod=!0,e.version=o[3]?o[3].replace(/_/g,"."):null),h&&(e.wp=!0,e.version=h[1]),u&&(e.webos=!0,e.version=u[2]),l&&(e.touchpad=!0),g&&(e.blackberry=!0,e.version=g[2]),p&&(e.bb10=!0,e.version=p[2]),v&&(e.rimtabletos=!0,e.version=v[2]),m&&(n.playbook=!0),f&&(e.kindle=!0,e.version=f[1]),d&&(n.silk=!0,n.version=d[1]),!d&&e.android&&t.match(/Kindle Fire/)&&(n.silk=!0),y&&(n.chrome=!0,n.version=y[1]),w&&(n.firefox=!0,n.version=w[1]),b&&(n.ie=!0,n.version=b[1]),S&&(a||e.ios)&&(n.safari=!0,a&&(n.version=S[1])),x&&(n.webview=!0),I&&(n.wechat=!0,n.version=I[1]),O&&(delete n.webview,n.baidu=!0,n.version=O[1]),C&&(n.qq=!0,n.version=C[1]),M&&(delete n.webview,n.uc=!0,n.version=M[1]),k&&(delete n.webview,n.sogou=!0,n.version=k[1]),P&&(n.xiaomi=!0,n.version=P[1]),E&&(n.liebao=!0,n.version="0"),X&&(n.mercury=!0,n.version=X[1]),navigator.standalone&&(n.standalone=!0),e.tablet=!!(s||m||r&&!t.match(/Mobile/)||w&&t.match(/Tablet/)||b&&!t.match(/Phone/)&&t.match(/Touch/)),e.phone=!(e.tablet||e.ipod||!(r||c||u||g||p||y&&t.match(/Android/)||y&&t.match(/CriOS\/([\d.]+)/)||w&&t.match(/Mobile/)||b&&t.match(/Touch/))),{browser:n,os:e}}function e(t){t.audioData=!!window.Audio,t.webAudio=!(!window.AudioContext&&!window.webkitAudioContext);var e=document.createElement("audio"),n=!1;try{(n=!!e.canPlayType)&&(e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"")&&(t.ogg=!0),(e.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,"")||e.canPlayType("audio/opus;").replace(/^no$/,""))&&(t.opus=!0),e.canPlayType("audio/mpeg;").replace(/^no$/,"")&&(t.mp3=!0),e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,"")&&(t.wav=!0),(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/aac;").replace(/^no$/,""))&&(t.m4a=!0),e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")&&(t.webm=!0))}catch(i){}}var n=t(navigator.userAgent),i={browser:n.browser,os:n.os,supportOrientation:"number"==typeof window.orientation&&"object"==typeof window.onorientationchange,supportTouch:"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,supportGeolocation:null!=navigator.geolocation,isAndroid:n.os.android,isIOS:n.os.ios,isPhone:n.os.phone,isTablet:n.os.tablet,isMobile:n.os.phone||n.os.tablet};return e(i),i}),n("ig/Game",["require","./Event","./util","./env","./Stage"],function(t){"use strict";function e(){var t=this,e=window.innerWidth,i=window.innerHeight,r=e/i,a=t.canvas.width/t.canvas.height,s=r>a?i/t.canvas.height:e/t.canvas.width,o=t.canvas.width*s,c=t.canvas.height*s;if(t.canvas.style.width=o+"px",t.canvas.style.height=c+"px",t.canvas.parentNode&&(t.canvas.parentNode.style.width=o+"px",t.canvas.parentNode.style.height=c+"px"),a>=r){var u=(i-c)/2;t.canvas.style.top=u+"px"}t.width=t.canvas.width,t.cssWidth=t.canvas.style.width,t.height=t.canvas.height,t.cssHeight=t.canvas.style.height,n.call(t)}function n(){this.offCanvas||(this.offCanvas=document.createElement("canvas"),this.offCtx=this.offCanvas.getContext("2d")),this.offCanvas.width=this.canvas.width,this.offCanvas.style.width=this.canvas.style.width,this.offCanvas.height=this.canvas.height,this.offCanvas.style.height=this.canvas.style.height}function i(t){t=t||{},f.apply(this,arguments),this.name=null===t.name||void 0===t.name?"ig_game_"+v++:t.name,this.paused=!1,this.stageStack=[],this.stages={},m=t.fps||60}var r,a,s,o,c,u,h,l,f=t("./Event"),d=t("./util"),g=t("./env"),p=t("./Stage"),v=0,m=60;return i.prototype={constructor:i,init:function(t){var i=this;if(!t.canvas)throw new Error("Game init must be require a canvas param");i.canvas=d.domWrap(t.canvas,document.createElement("div"),"ig-stage-container"+v),i.canvas.width=t.width||320,i.canvas.height=t.height||480;var r=parseInt(i.canvas.width,10),a=parseInt(i.canvas.height,10),s=t.maxWidth||5e3,o=t.maxHeight||5e3;if(t.maximize){document.body.style.padding=0,document.body.style.margin=0;var c,u=d.getType(t.pageScroll);c="number"===u?t.pageScroll:"boolean"===u?17:0,r=t.width||Math.min(window.innerWidth,s)-c,a=t.height||Math.min(window.innerHeight-5,o)}g.supportTouch&&(i.canvas.style.height=2*a+"px",window.scrollTo(0,1),r=Math.min(window.innerWidth,s),a=Math.min(window.innerHeight,o)),i.ctx=i.canvas.getContext("2d"),i.canvas.style.height=a+"px",i.canvas.style.width=r+"px",i.canvas.width=r,i.canvas.height=a,i.canvas.style.position="relative",i.width=i.canvas.width,i.cssWidth=i.canvas.style.width,i.height=i.canvas.height,i.cssHeight=i.canvas.style.height,n.call(i);var h=i.canvas.parentNode;return h.style.width=r+"px",h.style.margin="0 auto",h.style.position="relative",t.scaleFit&&e.call(i),window.addEventListener(g.supportOrientation?"orientationchange":"resize",function(){setTimeout(function(){window.scrollTo(0,1),t.scaleFit&&e.call(i)},0)},!1),i},start:function(){var t=this;t.paused=!1,a=Date.now(),r=0,s=1e3/m,o=0,c=Date.now(),u=0,h=0,l=0;var e="",n=d.noop,i=arguments.length;switch(i){case 1:"function"===d.getType(arguments[0])?n=arguments[0]:(e=arguments[0],n=d.noop);break;case 2:e=arguments[0],n=arguments[1]}if(e){for(var f=t.stageStack,g=-1,p=0,v=f.length;v>p;p++)if(f[p].name===e){g=p;break}t.swapStage(g,0)}return t.requestID=window.requestAnimationFrame(function(){t.render.call(t,e)}),"function"===d.getType(n)&&n.call(t,{data:{startTime:a,interval:s}}),t},render:function(){var t=this;if(t.requestID=window.requestAnimationFrame(function(t){return function(){t.render.call(t)}}(t)),!t.paused){if(r=Date.now(),o=r-a,o>s){l++,a=r-o%s,t.fire("beforeGameRender",{data:{startTime:a,totalFrameCounter:l}});var e=t.getCurrentStage();e&&(e.update(l,o),e.render()),t.fire("afterGameRender",{data:{startTime:a,totalFrameCounter:l}})}h>1e3?(c=Date.now(),h=0,t.fire("gameFPS",{data:{fps:u,totalFrameCounter:l}}),u=0):(h=Date.now()-c,++u)}},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},stop:function(){return window.cancelAnimationFrame(this.requestID),this},getStageStack:function(){return this.stageStack},getStageByName:function(t){return this.stages[t]},createStage:function(t){var e=this;t=d.extend({},{canvas:e.canvas,offCanvas:e.offCanvas,game:e},t);var n=new p(t);return this.pushStage(n),n},pushStage:function(t){var e=this;e.getStageByName(t.name)||(t.gameOwner=e,e.stageStack.push(t),e.stages[t.name]=t,e.sortStageIndex())},popStage:function(){var t=this,e=t.stageStack.pop();e&&(delete t.stages[e.name],t.sortStageIndex())},sortStageIndex:function(){for(var t=this.stageStack,e=t.length-1,n=0;e>=0;e--,n++)t[e].zIndex=n},removeStageByName:function(t){var e=this,n=e.getStageByName(t);if(n){delete e.stages[n.name];var i=e.stageStack;d.removeArrByCondition(i,function(e){return e.name===t}),e.sortStageIndex()}},changeStage:function(t){var e=this;if(t){for(var n=e.stageStack,i=-1,r=0,a=n.length;a>r;r++)if(n[r].name===t){i=r;break}e.swapStage(i,0)}},swapStage:function(t,e){var n=this,i=n.stageStack,r=i.length;if(t>=0&&r-1>=t&&e>=0&&r-1>=e){var a=i[t];i[t]=i[e],i[e]=a,n.sortStageIndex()}n.ctx.clearRect(0,0,n.canvas.width,n.canvas.height)},getStageIndex:function(t){return t.zIndex},getCurrentStage:function(){var t=this;return t.stageStack[0]},clearAllStage:function(){for(var t=this,e=0,n=t.stageStack.length;n>e;e++)t.stageStack[e].clean();t.stages={},t.stageStack=[]}},d.inherits(i,f),i}),n("ig/Stage",["require","./Event","./util","./DisplayObject","./domEvt"],function(t){"use strict";function e(t){var e=this;t.save(),t.fillStyle=t.createPattern(e.image,e.repeat),t.fillRect(e.x,e.y,t.canvas.width,t.canvas.height),t.restore(),h.src||(h.src=t.canvas.toDataURL(),e.image=h)}function n(t,e,n,i,r,a){var s=this,o=Math.abs(i.x)%r,c=Math.abs(i.y)%a,u=i.x<0?r-o:o,h=i.y<0?a-c:c,l=n.width<r-u?n.width:r-u,f=n.height<a-h?n.height:a-h;return t.drawImage(s.image,u,h,l,f,e.x,e.y,l,f),{width:l,height:f}}function i(){var t=this,i=t.parallax;if(i){var r=t.offCtx;"no-repeat"!==i.repeat&&e.call(i,r);for(var a=i.image.width,s=i.image.height,o={width:0,height:0},c=0;s>c;c+=o.height)for(var u=0;a>u;u+=o.width){var h={x:i.x+u,y:i.y+c},l={width:a-u,height:s-c},f={x:0,y:0};0===u&&(f.x=i.vX),0===c&&(f.y=i.vY),o=n.call(i,r,h,l,f,a,s)}}}function r(t){var e=this,n=e.parallax;n&&(n.anims&&"array"===o.getType(n.anims)?(n.animInterval=n.animInterval||1e4,n.curAnim||(n.curAnim=n.anims[0]),t%n.animInterval===0&&(void 0===n.time&&(n.time=0),n.time++,n.time===n.anims.length&&(n.time=0),n.curAnim=n.anims[n.time])):n.curAnim={aX:n.aX,aY:n.aY},n.vX=(n.vX+n.curAnim.aX)%n.image.width,n.vY=(n.vY+n.curAnim.aY)%n.image.height)}function a(t){s.apply(this,arguments),t=t||{},this.name=null===t.name||void 0===t.name?"ig_stage_"+l++:t.name,this.displayObjectList=[],this.displayObjects={},this.canvas=t.canvas,this.ctx=t.canvas.getContext("2d"),this.offCanvas=t.offCanvas,this.offCtx=t.offCanvas.getContext("2d"),this.width=t.game.width,this.height=t.game.height,this.cssWidth=t.game.cssWidth,this.cssHeight=t.game.cssHeight,this.initMouseEvent()}var s=t("./Event"),o=t("./util"),c=t("./DisplayObject"),u=t("./domEvt"),h=new Image,l=0;return a.prototype={constructor:a,initMouseEvent:function(){u.initMouse(this),this.bindMouseEvent()},bindMouseEvent:function(){var t=this;return u.events.forEach(function(e){var n=u.fireEvt[e];n&&t.on(e,n)}),t},clear:function(){var t=this;return t.offCtx.clearRect(0,0,t.width,t.height),t},setBgColor:function(t){var e=this;return e.bgColor=t,e},setBgImg:function(t,e){var n,i=this;"htmlimageelement"===o.getType(t)?n=t.src:"string"===o.getType(t)&&(n=t);var r="url("+n+")",a="",s="",c="";switch(e){case"center":a="no-repeat",s="center";break;case"full":c=i.cssWidth+"px "+i.cssHeight+"px"}return i.bgImg={bgUrl:r,bgRepeat:a,bgPos:s,bgSize:c},i},setParallaxScroll:function(t){var e=this;if(t=t||{},!t.image)throw new Error("ParallaxScroll must be require a image param");return t.repeat=t.repeat&&-1!==["repeat","repeat-x","repeat-y"].indexOf(t.repeat)?t.repeat:"no-repeat",e.parallax=o.extend({},{x:0,y:0,vX:0,vY:0,aX:0,aY:0},t),this},update:function(t,e){var n=this;r.call(n,t);for(var i,a=n.displayObjectList,s=a.length,o=0;s>o;o++)i=n.displayObjectList[o].status,(1===i||2===i)&&this.displayObjectList[o].update(e)},render:function(){var t=this;t.clear(),t.fire("beforeStageRender"),t.sortDisplayObject();var e,n=t.displayObjectList,r=n.length;t.offCtx.save(),t.offCtx.clearRect(0,0,t.offCanvas.width,t.offCanvas.height),t.canvas.style.backgroundColor=t.bgColor?t.bgColor:"",t.bgImg?(t.canvas.style.backgroundImage=t.bgImg.bgUrl,t.canvas.style.backgroundRepeat=t.bgImg.bgRepeat,t.canvas.style.backgroundPosition=t.bgImg.bgPos,t.canvas.style.backgroundSize=t.bgImg.bgSize):t.canvas.style.backgroundImage="",i.call(t);for(var a=0;r>a;a++)e=t.displayObjectList[a].status,(1===e||3===e)&&t.displayObjectList[a].render(t.offCtx);t.offCtx.restore(),t.ctx.drawImage(t.offCanvas,0,0),t.fire("afterStageRender")},renderDisplayObject:function(){var t,e=this,n=e.displayObjectList,i=n.length;e.offCtx.save(),e.offCtx.clearRect(0,0,e.offCanvas.width,e.offCanvas.height);for(var r=0;i>r;r++)t=e.displayObjectList[r].status,(1===t||3===t)&&e.displayObjectList[r].render(e.offCtx);e.offCtx.restore(),e.ctx.drawImage(e.offCanvas,0,0)},sortDisplayObject:function(){this.displayObjectList.sort(function(t,e){return t.zIndex-e.zIndex})},getDisplayObjectList:function(){return this.displayObjectList},getDisplayObjectByName:function(t){return this.displayObjects[t]},createDisplayObject:function(t){var e=new c(t);return this.addDisplayObject(e),e},addDisplayObject:function(t){var e=this;t&&!e.getDisplayObjectByName(t.name)&&(t.stageOwner=e,e.displayObjectList.push(t),e.displayObjects[t.name]=t)},removeDisplayObject:function(t){t&&this.removeDisplayObjectByName(t.name)},removeDisplayObjectByName:function(t){var e=this,n=e.displayObjects[t];if(n){delete e.displayObjects[n.name];var i=e.displayObjectList;o.removeArrByCondition(i,function(e){return e.name===t})}},clearAllDisplayObject:function(){this.displayObjectList=[],this.displayObjects={}}},o.inherits(a,s),a}),n("ig/DisplayObject",["require","./Event","./util"],function(t){"use strict";function e(t){t=t||{},n.apply(this,arguments),this.name=null===t.name||void 0===t.name?"ig_displayobject_"+r++:t.name,this.stageOwner=null,this.x=t.x||0,this.y=t.y||0,this.width=t.width||0,this.height=t.height||0,this.radius=t.radius||0,this.scaleX=t.scaleX||1,this.scaleY=t.scaleY||1,this.angle=t.angle||0,this.alpha=t.alpha||1,this.zIndex=t.zIndex||0,this.fillStyle=t.fillStyle||null,this.strokeStyle=t.strokeStyle||null,this.image=t.image||null,this.vX=t.vX||0,this.vY=t.vY||0,this.aX=t.aX||0,this.aY=t.aY||0,this.frictionX=t.frictionX||1,this.frictionY=t.frictionY||1,this.reverseVX=!1,this.reverseVY=!1,this.status=1,this.customProp=t.customProp||{},this.mouseEnable=!!t.mouseEnable||!1,this.debug=!!t.debug||!1,this.captureFunc=t.captureFunc||i.noop,this.moveFunc=t.moveFunc||i.noop,this.releaseFunc=t.releaseFunc||i.noop,this.setPos(this.x,this.y)}var n=t("./Event"),i=t("./util"),r=0;return e.prototype={constructor:e,setCaptureFunc:function(t){return this.captureFunc=t||i.noop,this},setMoveFunc:function(t){return this.moveFunc=t||i.noop,this},setReleaseFunc:function(t){return this.releaseFunc=t||i.noop,this},setPos:function(t,e){this.x=t||0,this.y=e||t||0},setAcceleration:function(t,e){this.aX=t||this.aX,this.aY=e||this.aY},setAccelerationX:function(t){this.aX=t||this.aX},setAccelerationY:function(t){this.aY=t||this.aY},resetAcceleration:function(){this.aX=0,this.aY=0},move:function(t,e){this.x+=t,this.y+=e},moveStep:function(){this.vX+=this.aX,this.vX*=this.frictionX,this.x+=this.vX,this.vY+=this.aY,this.vY*=this.frictionY,this.y+=this.vY},setFrictionX:function(t){this.frictionX=t},setFrictionY:function(t){this.frictionY=t},rotate:function(t){var e=this.stageOwner.offCtx;e.save(),e.rotate(i.deg2Rad(t||this.angle)),e.restore()},update:function(){return!0},render:function(){return!0}},i.inherits(e,n),e}),n("ig/SpriteSheet",["require","./util","./DisplayObject"],function(t){"use strict";function e(t){if(t=t||{},!t.image)throw new Error("SpriteSheet must be require a image param");i.apply(this,arguments),this.name=null===t.name||void 0===t.name?"ig_spritesheet_"+r++:t.name,this.relativeX=t.relativeX||0,this.relativeY=t.relativeY||0,this.frameWidth=t.frameWidth||32,this.frameHeight=t.frameHeight||32,this.total=t.total||1,this.totalBackup=this.total,this.frameIndex=0,this.frameStartX=t.frameStartX||0,this.frameStartXBackup=this.frameStartX,this.frameStartY=t.frameStartY||0,this.frameStartYBackup=this.frameStartY,this.offsets=t.offsets,this._offsetX=0,this._offsetY=0,this._offsetWidth=0,this._offsetHeight=0,a=0}var n=t("./util"),i=t("./DisplayObject"),r=0,a=0;return e.prototype={constructor:e,update:function(){var t=this;a%1===0&&(t._offsetX=0,t._offsetY=0,t._offsetWidth=0,t._offsetHeight=0,t.offsets&&t.offsets[t.frameIndex]&&(t._offsetX=t.offsets[t.frameIndex].x||0,t._offsetY=t.offsets[t.frameIndex].y||0,t._offsetWidth=t.offsets[t.frameIndex].width||0,t._offsetHeight=t.offsets[t.frameIndex].height||0),t.relativeX=t.frameStartX*t.frameWidth+t.frameIndex*t.frameWidth+t._offsetX,t.relativeY=t.frameStartY*t.frameHeight+t._offsetY,t.frameIndex++,t.frameIndex>=t.total&&(t.frameIndex=0,t.frameStartY=t.frameStartYBackup,t.total=t.totalBackup),t.frameIndex*t.frameWidth>=t.image.width&&(t.frameStartY++,t.total=t.total-t.frameIndex,t.frameIndex=0)),a++},render:function(t){var e=this;t.save(),t.globalAlpha=e.alpha,t.translate(e.x,e.y),t.rotate(n.deg2Rad(e.angle)),t.scale(e.scaleX,e.scaleY),t.drawImage(e.image,e.relativeX,e.relativeY,e.frameWidth+e._offsetWidth,e.frameHeight+e._offsetHeight,-e.frameWidth/2,-e.frameHeight/2,e.frameWidth+e._offsetWidth,e.frameHeight+e._offsetHeight),t.restore()}},n.inherits(e,i),e}),n("ig/resourceLoader",["require","./ig","./util"],function(t){function e(t){var e=t.split(".");return e[e.length-1].toLowerCase()}var n=t("./ig"),i=t("./util"),r={png:"Image",jpg:"Image",gif:"Image",jpeg:"Image",ogg:"Audio",wav:"Audio",m4a:"Audio",mp3:"Audio"};n.resources={},n.loadOther=function(){var t,n,r,a,s=arguments.length;switch(s){case 1:t=n=arguments[0],r=a=i.noop;break;case 2:t=n=arguments[0],r=a=arguments[1];break;case 3:t=n=arguments[0],r=arguments[1],a=arguments[2];break;default:t=arguments[0],n=arguments[1],r=arguments[2],a=arguments[3]}var o=e(n),c=new XMLHttpRequest;c.onreadystatechange=function(){4===c.readyState&&(200===c.status?"json"===o?r(t,JSON.parse(c.responseText)):r(t,c.responseText):a(n))},c.open("GET",n,!0),c.send(null)},n.loadImage=function(){var t,e,n,r,a=arguments.length;switch(a){case 1:t=e=arguments[0],n=r=i.noop;break;case 2:t=e=arguments[0],n=r=arguments[1];break;case 3:t=e=arguments[0],n=arguments[1],r=arguments[2];break;default:t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3]}var s=new Image;s.addEventListener("load",function(){n(t,s)}),s.addEventListener("error",function(){r(e)}),s.src=e},n.loadResource=function(t,a,s){var o=this;s=s||{},Array.isArray(t)||(t=[t]);for(var c=!1,u=function(t){c=!0,(s.errorCallback||function(t){throw"Loading Error: "+t}).call(o,t)},h=s.processCallback||i.noop,l=t.length,f=l,d=function(t,e){c||(n.resources[t]||(n.resources[t]=e),f--,h(l-f,l),0===f&&a&&a.call(o,n.resources))},g=s.customResourceTypes||{},p=i.extend({},r,g),v=0;l>v;v++){var m,y,w=t[v];"object"===i.getType(w)?(m=w.id,y=w.src):m=y=w;var b=o["load"+p[e(y)]];b||(b=o.loadOther),b(m,y,d,u)}}}),n("ig/Shape/Ball",["require","../util","../DisplayObject"],function(t){"use strict";function e(){var t=this;i.apply(t,arguments)}var n=t("../util"),i=t("../DisplayObject");return e.prototype={constructor:e,update:function(){var t=this,e=t.stageOwner.width,n=t.stageOwner.height;(t.x<t.radius||t.x>e-t.radius)&&(t.vX=-t.vX),(t.y<t.radius||t.y>n-t.radius)&&(t.vY=-t.vY),t.moveStep(),t.bBox.x=t.x,t.bBox.y=t.y},render:function(t){t.save(),t.beginPath(),t.fillStyle=this.color,t.arc(this.x,this.y,this.radius,0,2*Math.PI),t.fill(),t.restore(),this.bBox.color="red",this.checkCollide(),this.bBox.show(t)},setBBox:function(t){this.bBox=t},checkCollide:function(){for(var t=this,e=t.stageOwner.displayObjectList,n=e.length,i=0;n>i;i++)t.name!==e[i].name&&t.bBox.isCollide(e[i].bBox)&&"yellow"!==t.bBox.color&&(console.warn(1),t.bBox.color="yellow",e[i].bBox.color="yellow")}},n.inherits(e,i),e}),n("ig/geom/Circle",["require","../util","../DisplayObject","../collision"],function(t){"use strict";function e(){i.apply(this,arguments)}var n=t("../util"),i=t("../DisplayObject"),r=t("../collision"),a=Math.abs,s=Math.sqrt;return e.prototype={constructor:e,intersects:function(t,e){return r.checkCircleCircle(this,t,e)},intersectsPolygon:function(t,e){return r.checkCirclePolygon(this,t,e)},hitTestPoint:function(t,e){var n=a(t-this.x),i=a(e-this.y),r=s(n*n+i*i);return r<=this.radius?!0:!1},debugRender:function(t){this.debug&&(t.save(),t.strokeStyle="black",t.strokeRect(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius),t.restore())}},n.inherits(e,i),e}),n("ig/geom/Vector",["require"],function(){function t(t,e){this.x=t||0,this.y=e||t||0}var e=Math.sqrt,n=Math.cos,i=Math.sin;return t.prototype={constructor:t,copy:function(t){return this.x=t.x,this.y=t.y,this},rotate:function(t){var e=this.x,r=this.y,a=n(t),s=i(t);return this.x=e*a-r*s,this.y=e*s+r*a,this},perp:function(){var t=this.x;return this.x=this.y,this.y=-t,this},reverse:function(){return this.x=-this.x,this.y=-this.y,this},normalize:function(){var t=this.len();return t>0&&(this.x/=t,this.y/=t),this},add:function(t){return this.x+=t.x,this.y+=t.y,this},sub:function(t){return this.x-=t.x,this.y-=t.y,this},scale:function(t,e){return this.x*=t,this.y*=e||t,this},project:function(t){var e=this.dot(t)/t.len2();return this.x=e*t.x,this.y=e*t.y,this},projectN:function(t){var e=this.dot(t);return this.x=e*t.x,this.y=e*t.y,this},reflect:function(t){var e=this.x,n=this.y;return this.project(t).scale(2),this.x-=e,this.y-=n,this},reflectN:function(t){var e=this.x,n=this.y;return this.projectN(t).scale(2),this.x-=e,this.y-=n,this},dot:function(t){return this.x*t.x+this.y*t.y},len2:function(){return this.dot(this)},len:function(){return e(this.len2())}},t}),n("ig/geom/Polygon",["require","../collision","./Vector"],function(t){"use strict";var e=t("../collision"),n=t("./Vector"),i={};return i.recalc=function(t){var e=t.points,i=e.length;t.edges=[],t.normals=[];for(var r=0;i>r;r++){var a=e[r],s=i-1>r?e[r+1]:e[0],o=(new n).copy(s).sub(a),c=(new n).copy(o).perp().normalize();t.edges.push(o),t.normals.push(c)}return t},i.toPolygon=function(t){var e=t.width,n=t.height;return t.points=[{x:0,y:0},{x:e,y:0},{x:e,y:n},{x:0,y:n}],i.recalc(t),t},i.getBounds=function(t){for(var e=t.points,n=t.x,i=t.y,e=t.points,n=t.x,i=t.y,r=Number.MAX_VALUE,a=Number.MIN_VALUE,s=Number.MAX_VALUE,o=Number.MIN_VALUE,c=0,u=e.length;u>c;c++)e[c].x<r&&(r=e[c].x),e[c].x>a&&(a=e[c].x),e[c].y<s&&(s=e[c].y),e[c].y>o&&(o=e[c].y);return t.bounds={x:r+n,y:s+i,width:a-r,height:o-s},t},i.intersects=function(t,n,i){return e.checkPolygonPolygon(t,n,i)},i.intersectsCircle=function(t,n,i){return e.checkPolygonCircle(t,n,i)},i}),n("ig/geom/Rect",["require","../util","../DisplayObject","../collision","./Polygon","./Vector"],function(t){"use strict";function e(){i.apply(this,arguments),this.toPolygon()}{var n=t("../util"),i=t("../DisplayObject"),r=t("../collision"),a=t("./Polygon");t("./Vector")}return e.prototype={constructor:e,toPolygon:function(){var t=this.width,e=this.height,n=new a({x:this.x,y:this.y,points:[{x:0,y:0},{x:t,y:0},{x:t,y:e},{x:0,y:e}]});return this.edges=n.edges,this.points=n.points,this.normals=n.normals,this},intersects:function(t,e){return r.checkPolygonPolygon(this,t,e)},hitTestPoint:function(t,e){return t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height},getBounds:function(){return this.bounds={x:this.x,y:this.y,width:this.width,height:this.height},this},debugRender:function(t){this.debug&&(this.getBounds(),t.save(),t.strokeStyle="black",t.strokeRect(this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height),t.restore())}},n.inherits(e,i),e}),n("ig/collision",["require","./geom/Vector"],function(t){"use strict";function e(){this.first=null,this.second=null,this.overlapN=new a,this.overlapV=new a,this.reset()}function n(t,e,n){for(var i=Number.MAX_VALUE,r=-Number.MAX_VALUE,s=t.length;s--;){var o=new a(t[s].x,t[s].y).dot(e);i>o&&(i=o),o>r&&(r=o)}n[0]=i,n[1]=r}function i(t,e,i,r,a,s){var o=g.pop(),u=g.pop(),h=f.pop().copy(e).sub(t),l=h.dot(a);if(n(i,a,o),n(r,a,u),u[0]+=l,u[1]+=l,o[0]>u[1]||u[0]>o[1])return f.push(h),g.push(o),g.push(u),!0;if(s){var d=0;if(o[0]<u[0])if(s.firstInSecond=!1,o[1]<u[1])d=o[1]-u[0],s.secondInFirst=!1;else{var p=o[1]-u[0],v=u[1]-o[0];d=v>p?p:-v}else if(s.secondInFirst=!1,o[1]>u[1])d=o[0]-u[1],s.firstInSecond=!1;else{var p=o[1]-u[0],v=u[1]-o[0];d=v>p?p:-v}var m=c(d);m<s.overlap&&(s.overlap=m,s.overlapN.copy(a),0>d&&s.overlapN.reverse())}return f.push(h),g.push(o),g.push(u),!1}function r(t,e){var n=t.len2(),i=e.dot(t);return 0>i?u:i>n?l:h}for(var a=t("./geom/Vector"),s=Math.sqrt,o=Math.pow,c=Math.abs,u=-1,h=0,l=1,f=[],d=0;10>d;d++)f.push(new a);for(var g=[],d=0;5>d;d++)g.push([]);e.prototype={constructor:e,reset:function(){return this.firstInSecond=!0,this.secondInFirst=!0,this.overlap=Number.MAX_VALUE,this}};var p=new e,v={};return v.checkCircleCircle=function(t,e,n){var i=f.pop().copy(new a(e.x,e.y)).sub(new a(t.x,t.y)),r=t.radius*t.scaleX+e.radius*e.scaleX,c=o(r,2),u=i.len2();if(u>c)return f.push(i),!1;if(n){p.reset();var h=s(u);return p.first=t,p.second=e,p.overlap=r-h,p.overlapN.copy(i.normalize()),p.overlapV.copy(i).scale(p.overlap),p.firstInSecond=t.radius<=e.radius&&h<=e.radius-t.radius,p.secondInFirst=e.radius<=t.radius&&h<=t.radius-e.radius,f.push(i),p}},v.checkPolygonPolygon=function(t,e,n){var r=t.points,a=r.length,s=e.points,o=s.length,c={x:t.x,y:t.y},u={x:e.x,y:e.y},h=null;
for(n&&(h=p.reset());a--;)if(i(c,u,r,s,t.normals[a],h))return!1;for(;o--;)if(i(c,u,r,s,e.normals[o],h))return!1;return h&&(h.first=t,h.second=e,h.overlapV.copy(h.overlapN).scale(h.overlap)),h},v.checkPolygonCircle=function(t,e,n){var i=f.pop().copy(new a(e.x,e.y)).sub(new a(t.x,t.y)),s=e.radius,o=s*s,h=t.points,d=h.length,g=f.pop(),v=f.pop(),m=null;n&&(m=p.reset());for(var y=0;d>y;y++){var w=y===d-1?0:y+1,b=0===y?d-1:y-1,x=0,S=null;g.copy(t.edges[y]),v.copy(i).sub(h[y]),m&&v.len2()>o&&(m.firstInSecond=!1);var I=r(g,v);if(I===u){g.copy(t.edges[b]);var O=f.pop().copy(i).sub(h[b]);if(I=r(g,O),I===l){var C=v.len();if(C>s)return f.push(i),f.push(g),f.push(v),f.push(O),!1;m&&(m.secondInFirst=!1,S=v.normalize(),x=s-C)}f.push(O)}else if(I===l){if(g.copy(t.edges[w]),v.copy(i).sub(h[w]),I=r(g,v),I===u){var C=v.len();if(C>s)return f.push(i),f.push(g),f.push(v),!1;m&&(m.secondInFirst=!1,S=v.normalize(),x=s-C)}}else{var M=g.perp().normalize(),C=v.dot(M),k=c(C);if(C>0&&k>s)return f.push(i),f.push(M),f.push(v),!1;m&&(S=M,x=s-C,(C>=0||2*s>x)&&(m.secondInFirst=!1))}S&&m&&c(x)<c(m.overlap)&&(m.overlap=x,m.overlapN.copy(S))}return m&&(m.a=t,m.b=e,m.overlapV.copy(m.overlapN).scale(m.overlap)),f.push(i),f.push(g),f.push(v),m},v.checkCirclePolygon=function(t,e,n){var i=v.checkPolygonCircle(e,t,n);if(i){var r=i.first,a=i.firstInSecond;i.overlapN.reverse(),i.overlapV.reverse(),i.first=i.second,i.second=r,i.firstInSecond=i.secondInFirst,i.secondInFirst=a}return i},v}),n("ig/geom/polygon",["require","../collision","./Vector"],function(t){"use strict";var e=t("../collision"),n=t("./Vector"),i={};return i.recalc=function(t){var e=t.points,i=e.length;t.edges=[],t.normals=[];for(var r=0;i>r;r++){var a=e[r],s=i-1>r?e[r+1]:e[0],o=(new n).copy(s).sub(a),c=(new n).copy(o).perp().normalize();t.edges.push(o),t.normals.push(c)}return t},i.toPolygon=function(t){var e=t.width,n=t.height;return t.points=[{x:0,y:0},{x:e,y:0},{x:e,y:n},{x:0,y:n}],i.recalc(t),t},i.getBounds=function(t){for(var e=t.points,n=t.x,i=t.y,e=t.points,n=t.x,i=t.y,r=Number.MAX_VALUE,a=Number.MIN_VALUE,s=Number.MAX_VALUE,o=Number.MIN_VALUE,c=0,u=e.length;u>c;c++)e[c].x<r&&(r=e[c].x),e[c].x>a&&(a=e[c].x),e[c].y<s&&(s=e[c].y),e[c].y>o&&(o=e[c].y);return t.bounds={x:r+n,y:s+i,width:a-r,height:o-s},t},i.intersects=function(t,n,i){return e.checkPolygonPolygon(t,n,i)},i.intersectsCircle=function(t,n,i){return e.checkPolygonCircle(t,n,i)},i}),n("ig/domEvt",["require","./util","./env","./Event"],function(t){var e=t("./util"),n=t("./env"),i=(t("./Event"),["touchstart","touchmove","touchend"]),r=["mousedown","mousemove","mouseup"],a={};return a.events=n.supportTouch?i:r,a.fireEvt={},a.fireEvt.touchstart=a.fireEvt.mousedown=function(t){for(var e=t.target,n=e.displayObjectList,i=0,r=n.length;r>i;i++){var a=n[i];a.mouseEnable&&a.hitTestPoint(t.data.x,t.data.y)&&(t.data.curStage=e,a.isCapture=!0,a.captureFunc.call(a,t.data))}return e},a.fireEvt.touchmove=a.fireEvt.mousemove=function(t){for(var e=t.target,n=e.displayObjectList,i=0,r=n.length;r>i;i++){var a=n[i];a.mouseEnable&&a.isCapture&&(t.data.curStage=e,a.moveFunc.call(a,t.data))}return e},a.fireEvt.touchend=a.fireEvt.mouseup=function(t){for(var e=t.target,n=e.displayObjectList,i=0,r=n.length;r>i;i++){var a=n[i];a.isCapture=!1}return e},a.initMouse=function(t){this.stage=t,this.element=t.canvas,this.x=0,this.y=0,this.isDown=!1;var n=e.getElementOffset(this.element);return this.offsetX=n.x,this.offsetY=n.y,this.addEvent(),this},a.refreshMouse=function(t){console.warn("refreshMouse"),this.stage=t,this.element=t.canvas,this.x=0,this.y=0,this.isDown=!1;var n=e.getElementOffset(this.element);return this.offsetX=n.x,this.offsetY=n.y,this},a.addEvent=function(){var t=this,e=t.element;t.events.forEach(function(n,i){e.addEventListener(n,function(e){e.preventDefault(),0==i?t.isDown=!0:2==i&&(t.isDown=!1);var r=e.changedTouches?e.changedTouches[0].pageX:e.pageX,a=e.changedTouches?e.changedTouches[0].pageY:e.pageY;t.x=r-t.offsetX,t.y=a-t.offsetY,t.stage.fire(n,{data:{x:t.x,y:t.y,isDown:t.isDown}})})})},a}),n("ig/Bitmap",["require","./util","./DisplayObject","./geom/polygon"],function(t){"use strict";function e(t){if(t=t||{},!t.image)throw new Error("Bitmap must be require a image param");i.apply(this,arguments),this.sX=t.sX||0,this.sY=t.sY||0,this.sWidth=t.sWidth||0,this.sHeight=t.sHeight||0,this.width=t.width||this.image.width||0,this.height=t.height||this.image.height||0,t.points&&t.points.length&&"array"===n.getType(t.points)?this.points=t.points:r.toPolygon(this),r.recalc(this),r.getBounds(this)}var n=t("./util"),i=t("./DisplayObject"),r=t("./geom/polygon");return e.prototype={constructor:e,setSY:function(t){this.sY=t},render:function(t){return r.getBounds(this),t.save(),t.drawImage(this.image,this.sX,this.sY,this.sWidth||this.width,this.sHeight||this.height,this.x,this.y,this.width,this.height),this.debugRender(t),t.restore(),this},hitTestPoint:function(t,e){return t>=this.bounds.x&&t<=this.bounds.x+this.bounds.width&&e>=this.bounds.y&&e<=this.bounds.y+this.bounds.height},debugRender:function(t){this.debug&&(t.save(),t.strokeStyle="black",t.strokeRect(this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height),t.restore())}},n.inherits(e,i),e}),n("ig/easing",["require"],function(){var t={};return t.linear=function(t,e,n,i){return n*t/i+e},t.easeInQuad=function(t,e,n,i){return n*(t/=i)*t+e},t.easeOutQuad=function(t,e,n,i){return-n*(t/=i)*(t-2)+e},t.easeInOutQuad=function(t,e,n,i){return(t/=i/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e},t.easeInCubic=function(t,e,n,i){return n*(t/=i)*t*t+e},t.easeOutCubic=function(t,e,n,i){return n*((t=t/i-1)*t*t+1)+e},t.easeInOutCubic=function(t,e,n,i){return(t/=i/2)<1?n/2*t*t*t+e:n/2*((t-=2)*t*t+2)+e},t.easeInQuart=function(t,e,n,i){return n*(t/=i)*t*t*t+e},t.easeOutQuart=function(t,e,n,i){return-n*((t=t/i-1)*t*t*t-1)+e},t.easeInOutQuart=function(t,e,n,i){return(t/=i/2)<1?n/2*t*t*t*t+e:-n/2*((t-=2)*t*t*t-2)+e},t.easeInQuint=function(t,e,n,i){return n*(t/=i)*t*t*t*t+e},t.easeOutQuint=function(t,e,n,i){return n*((t=t/i-1)*t*t*t*t+1)+e},t.easeInOutQuint=function(t,e,n,i){return(t/=i/2)<1?n/2*t*t*t*t*t+e:n/2*((t-=2)*t*t*t*t+2)+e},t.easeInSine=function(t,e,n,i){return-n*Math.cos(t/i*(Math.PI/2))+n+e},t.easeOutSine=function(t,e,n,i){return n*Math.sin(t/i*(Math.PI/2))+e},t.easeInOutSine=function(t,e,n,i){return-n/2*(Math.cos(Math.PI*t/i)-1)+e},t.easeInExpo=function(t,e,n,i){return 0===t?e:n*Math.pow(2,10*(t/i-1))+e},t.easeOutExpo=function(t,e,n,i){return t==i?e+n:n*(-Math.pow(2,-10*t/i)+1)+e},t.easeInOutExpo=function(t,e,n,i){return 0===t?e:t==i?e+n:(t/=i/2)<1?n/2*Math.pow(2,10*(t-1))+e:n/2*(-Math.pow(2,-10*--t)+2)+e},t.easeInCirc=function(t,e,n,i){return-n*(Math.sqrt(1-(t/=i)*t)-1)+e},t.easeOutCirc=function(t,e,n,i){return n*Math.sqrt(1-(t=t/i-1)*t)+e},t.easeInOutCirc=function(t,e,n,i){return(t/=i/2)<1?-n/2*(Math.sqrt(1-t*t)-1)+e:n/2*(Math.sqrt(1-(t-=2)*t)+1)+e},t.easeInElastic=function(t,e,n,i,r,a){if(0===t)return e;if(1==(t/=i))return e+n;a||(a=.3*i);var s;return!r||r<Math.abs(n)?(r=n,s=a/4):s=a/(2*Math.PI)*Math.asin(n/r),-(r*Math.pow(2,10*(t-=1))*Math.sin(2*(t*i-s)*Math.PI/a))+e},t.easeOutElastic=function(t,e,n,i,r,a){if(0===t)return e;if(1==(t/=i))return e+n;a||(a=.3*i);var s;return!r||r<Math.abs(n)?(r=n,s=a/4):s=a/(2*Math.PI)*Math.asin(n/r),r*Math.pow(2,-10*t)*Math.sin(2*(t*i-s)*Math.PI/a)+n+e},t.easeInOutElastic=function(t,e,n,i,r,a){if(0===t)return e;if(2==(t/=i/2))return e+n;a||(a=.3*i*1.5);var s;return!r||r<Math.abs(n)?(r=n,s=a/4):s=a/(2*Math.PI)*Math.asin(n/r),1>t?-.5*r*Math.pow(2,10*(t-=1))*Math.sin(2*(t*i-s)*Math.PI/a)+e:r*Math.pow(2,-10*(t-=1))*Math.sin(2*(t*i-s)*Math.PI/a)*.5+n+e},t.easeInBack=function(t,e,n,i,r){return void 0===r&&(r=1.70158),n*(t/=i)*t*((r+1)*t-r)+e},t.easeOutBack=function(t,e,n,i,r){return void 0===r&&(r=1.70158),n*((t=t/i-1)*t*((r+1)*t+r)+1)+e},t.easeInOutBack=function(t,e,n,i,r){return void 0===r&&(r=1.70158),(t/=i/2)<1?n/2*t*t*(((r*=1.525)+1)*t-r)+e:n/2*((t-=2)*t*(((r*=1.525)+1)*t+r)+2)+e},t.easeInBounce=function(e,n,i,r){return i-t.easeOutBounce(r-e,0,i,r)+n},t.easeOutBounce=function(t,e,n,i){return(t/=i)<1/2.75?7.5625*n*t*t+e:2/2.75>t?n*(7.5625*(t-=1.5/2.75)*t+.75)+e:2.5/2.75>t?n*(7.5625*(t-=2.25/2.75)*t+.9375)+e:n*(7.5625*(t-=2.625/2.75)*t+.984375)+e},t.easeInOutBounce=function(e,n,i,r){return r/2>e?.5*t.easeInBounce(2*e,0,i,r)+n:.5*t.easeOutBounce(2*e-r,0,i,r)+.5*i+n},t});var i,r=e("ig"),a="ig/util",s="util",o="";o?r[o]?r[o][s]=e(a):(i={},i[s]=e(a),r[o]=i):(i=e(a),s&&(r[s]=i));var i,a="ig/Event",s="Event",o="";o?r[o]?r[o][s]=e(a):(i={},i[s]=e(a),r[o]=i):(i=e(a),s&&(r[s]=i));var i,a="ig/env",s="env",o="";o?r[o]?r[o][s]=e(a):(i={},i[s]=e(a),r[o]=i):(i=e(a),s&&(r[s]=i));var i,a="ig/Game",s="Game",o="";o?r[o]?r[o][s]=e(a):(i={},i[s]=e(a),r[o]=i):(i=e(a),s&&(r[s]=i));var i,a="ig/Stage",s="",o="";o?r[o]?r[o][s]=e(a):(i={},i[s]=e(a),r[o]=i):(i=e(a),s&&(r[s]=i));var i,a="ig/DisplayObject",s="DisplayObject",o="";o?r[o]?r[o][s]=e(a):(i={},i[s]=e(a),r[o]=i):(i=e(a),s&&(r[s]=i));var i,a="ig/SpriteSheet",s="SpriteSheet",o="";o?r[o]?r[o][s]=e(a):(i={},i[s]=e(a),r[o]=i):(i=e(a),s&&(r[s]=i));var i,a="ig/resourceLoader",s="",o="";o?r[o]?r[o][s]=e(a):(i={},i[s]=e(a),r[o]=i):(i=e(a),s&&(r[s]=i));var i,a="ig/Stage",s="",o="";o?r[o]?r[o][s]=e(a):(i={},i[s]=e(a),r[o]=i):(i=e(a),s&&(r[s]=i));var i,a="ig/Shape/Ball",s="Ball",o="Shape";o?r[o]?r[o][s]=e(a):(i={},i[s]=e(a),r[o]=i):(i=e(a),s&&(r[s]=i));var i,a="ig/geom/Circle",s="Circle",o="geom";o?r[o]?r[o][s]=e(a):(i={},i[s]=e(a),r[o]=i):(i=e(a),s&&(r[s]=i));var i,a="ig/geom/Vector",s="Vector",o="geom";o?r[o]?r[o][s]=e(a):(i={},i[s]=e(a),r[o]=i):(i=e(a),s&&(r[s]=i));var i,a="ig/geom/Polygon",s="Polygon",o="geom";o?r[o]?r[o][s]=e(a):(i={},i[s]=e(a),r[o]=i):(i=e(a),s&&(r[s]=i));var i,a="ig/geom/Rect",s="Rect",o="geom";o?r[o]?r[o][s]=e(a):(i={},i[s]=e(a),r[o]=i):(i=e(a),s&&(r[s]=i));var i,a="ig/collision",s="",o="";o?r[o]?r[o][s]=e(a):(i={},i[s]=e(a),r[o]=i):(i=e(a),s&&(r[s]=i));var i,a="ig/geom/polygon",s="",o="geom";o?r[o]?r[o][s]=e(a):(i={},i[s]=e(a),r[o]=i):(i=e(a),s&&(r[s]=i));var i,a="ig/domEvt",s="",o="";o?r[o]?r[o][s]=e(a):(i={},i[s]=e(a),r[o]=i):(i=e(a),s&&(r[s]=i));var i,a="ig/Bitmap",s="Bitmap",o="";o?r[o]?r[o][s]=e(a):(i={},i[s]=e(a),r[o]=i):(i=e(a),s&&(r[s]=i));var i,a="ig/easing",s="easing",o="";o?r[o]?r[o][s]=e(a):(i={},i[s]=e(a),r[o]=i):(i=e(a),s&&(r[s]=i)),t.ig=r}(window);