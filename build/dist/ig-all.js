!function(t){var e,n;!function(){function t(t,e){if(!e)return t;if(0===t.indexOf(".")){var n=e.split("/"),a=t.split("/"),r=n.length-1,i=a.length,o=0,s=0;t:for(var u=0;i>u;u++)switch(a[u]){case"..":if(!(r>o))break t;o++,s++;break;case".":s++;break;default:break t}return n.length=r-o,a=a.slice(s),n.concat(a).join("/")}return t}function a(e){function n(n,o){if("string"==typeof n){var s=a[n];return s||(s=i(t(n,e)),a[n]=s),s}n instanceof Array&&(o=o||function(){},o.apply(this,r(n,o,e)))}var a={};return n}function r(n,a,r){for(var s=[],u=o[r],c=0,h=Math.min(n.length,a.length);h>c;c++){var l,p=t(n[c],r);switch(p){case"require":l=u&&u.require||e;break;case"exports":l=u.exports;break;case"module":l=u;break;default:l=i(p)}s.push(l)}return s}function i(t){var e=o[t];if(!e)throw new Error("No "+t);if(!e.defined){var n=e.factory,a=n.apply(this,r(e.deps||[],n,t));"undefined"!=typeof a&&(e.exports=a),e.defined=1}return e.exports}var o={};n=function(t,e,n){o[t]={id:t,deps:e,factory:n,defined:0,exports:{},require:a(t)}},e=a("")}(),n("ig",["ig/ig"],function(t){return t}),n("ig/ig",["require"],function(){window.requestAnimationFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(t){var e,n,a=this;setTimeout(function(){e=+new Date,t(e),n=+new Date,a.timeout=1e3/60-(n-e)},a.timeout)}}(),window.cancelAnimationFrame=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelAnimationFrame||window.mozCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.msCancelRequestAnimationFrame||window.oCancelAnimationFrame||window.oCancelRequestAnimationFrame||window.clearTimeout}();var t={};return t}),n("ig/util",["require"],function(){var t=Math.PI/180,e=180/Math.PI,n=Object.prototype,a={};return a.noop=function(){},a.getType=function(t){var e=n.toString.call(t).slice(8,-1);return e.toLowerCase()},a.isType=function(t,e){var n=a.getType(e);return t.toLowerCase()===n},a.isWindow=function(t){return null!=t&&t===t.window},a.isPlainObject=function(t){return"object"!==a.getType(t)||t.nodeType||a.isWindow(t)?!1:t.constructor&&!{}.hasOwnProperty.call(t.constructor.prototype,"isPrototypeOf")?!1:!0},a.extend=function(){var t,e,n,r,i,o,s=arguments[0]||{},u=1,c=arguments.length,h=!1;for("boolean"==typeof s&&(h=s,s=arguments[u]||{},u++),"object"==typeof s||a.isType("function",s)||(s={}),u===c&&(s=this,u--);c>u;u++)if(null!=(t=arguments[u]))for(e in t)if(t.hasOwnProperty(e)){if(n=s[e],r=t[e],s===r)continue;h&&r&&(a.isPlainObject(r)||(i=Array.isArray(r)))?(i?(i=!1,o=n&&Array.isArray(n)?n:[]):o=n&&a.isPlainObject(n)?n:{},s[e]=a.extend(h,o,r)):void 0!==r&&(s[e]=r)}return s},a.inherits=function(t,e){var n=function(){};n.prototype=e.prototype;var a=t.prototype,r=t.prototype=new n;for(var i in a)a.hasOwnProperty(i)&&(r[i]=a[i]);return t.prototype.constructor=t,t.superClass=e.prototype,t},a.deg2Rad=function(e){return e*t},a.rad2Deg=function(t){return t*e},a.window2Canvas=function(t,e,n){var a=t.getBoundingClientRect();return{x:Math.round(e-a.left*(t.width/a.width)),y:Math.round(n-a.top*(t.height/a.height))}},a.domWrap=function(t,e,n){return t.parentNode.insertBefore(e,t),e.appendChild(t),e.id=n||"ig-create-dom-"+Date.now(),t},a}),n("ig/easing",["require"],function(){var t={};return t.linear=function(t,e,n,a){return n*t/a+e},t.easeInQuad=function(t,e,n,a){return n*(t/=a)*t+e},t.easeOutQuad=function(t,e,n,a){return-n*(t/=a)*(t-2)+e},t.easeInOutQuad=function(t,e,n,a){return(t/=a/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e},t.easeInCubic=function(t,e,n,a){return n*(t/=a)*t*t+e},t.easeOutCubic=function(t,e,n,a){return n*((t=t/a-1)*t*t+1)+e},t.easeInOutCubic=function(t,e,n,a){return(t/=a/2)<1?n/2*t*t*t+e:n/2*((t-=2)*t*t+2)+e},t.easeInQuart=function(t,e,n,a){return n*(t/=a)*t*t*t+e},t.easeOutQuart=function(t,e,n,a){return-n*((t=t/a-1)*t*t*t-1)+e},t.easeInOutQuart=function(t,e,n,a){return(t/=a/2)<1?n/2*t*t*t*t+e:-n/2*((t-=2)*t*t*t-2)+e},t.easeInQuint=function(t,e,n,a){return n*(t/=a)*t*t*t*t+e},t.easeOutQuint=function(t,e,n,a){return n*((t=t/a-1)*t*t*t*t+1)+e},t.easeInOutQuint=function(t,e,n,a){return(t/=a/2)<1?n/2*t*t*t*t*t+e:n/2*((t-=2)*t*t*t*t+2)+e},t.easeInSine=function(t,e,n,a){return-n*Math.cos(t/a*(Math.PI/2))+n+e},t.easeOutSine=function(t,e,n,a){return n*Math.sin(t/a*(Math.PI/2))+e},t.easeInOutSine=function(t,e,n,a){return-n/2*(Math.cos(Math.PI*t/a)-1)+e},t.easeInExpo=function(t,e,n,a){return 0===t?e:n*Math.pow(2,10*(t/a-1))+e},t.easeOutExpo=function(t,e,n,a){return t===a?e+n:n*(-Math.pow(2,-10*t/a)+1)+e},t.easeInOutExpo=function(t,e,n,a){return 0===t?e:t===a?e+n:(t/=a/2)<1?n/2*Math.pow(2,10*(t-1))+e:n/2*(-Math.pow(2,-10*--t)+2)+e},t.easeInCirc=function(t,e,n,a){return-n*(Math.sqrt(1-(t/=a)*t)-1)+e},t.easeOutCirc=function(t,e,n,a){return n*Math.sqrt(1-(t=t/a-1)*t)+e},t.easeInOutCirc=function(t,e,n,a){return(t/=a/2)<1?-n/2*(Math.sqrt(1-t*t)-1)+e:n/2*(Math.sqrt(1-(t-=2)*t)+1)+e},t.easeInElastic=function(t,e,n,a,r,i){if(0===t)return e;if(1===(t/=a))return e+n;i||(i=.3*a);var o;return!r||r<Math.abs(n)?(r=n,o=i/4):o=i/(2*Math.PI)*Math.asin(n/r),-(r*Math.pow(2,10*(t-=1))*Math.sin(2*(t*a-o)*Math.PI/i))+e},t.easeOutElastic=function(t,e,n,a,r,i){if(0===t)return e;if(1===(t/=a))return e+n;i||(i=.3*a);var o;return!r||r<Math.abs(n)?(r=n,o=i/4):o=i/(2*Math.PI)*Math.asin(n/r),r*Math.pow(2,-10*t)*Math.sin(2*(t*a-o)*Math.PI/i)+n+e},t.easeInOutElastic=function(t,e,n,a,r,i){if(0===t)return e;if(2===(t/=a/2))return e+n;i||(i=.3*a*1.5);var o;return!r||r<Math.abs(n)?(r=n,o=i/4):o=i/(2*Math.PI)*Math.asin(n/r),1>t?-.5*r*Math.pow(2,10*(t-=1))*Math.sin(2*(t*a-o)*Math.PI/i)+e:r*Math.pow(2,-10*(t-=1))*Math.sin(2*(t*a-o)*Math.PI/i)*.5+n+e},t.easeInBack=function(t,e,n,a,r){return void 0===r&&(r=1.70158),n*(t/=a)*t*((r+1)*t-r)+e},t.easeOutBack=function(t,e,n,a,r){return void 0===r&&(r=1.70158),n*((t=t/a-1)*t*((r+1)*t+r)+1)+e},t.easeInOutBack=function(t,e,n,a,r){return void 0===r&&(r=1.70158),(t/=a/2)<1?n/2*t*t*(((r*=1.525)+1)*t-r)+e:n/2*((t-=2)*t*(((r*=1.525)+1)*t+r)+2)+e},t.easeInBounce=function(e,n,a,r){return a-t.easeOutBounce(r-e,0,a,r)+n},t.easeOutBounce=function(t,e,n,a){return(t/=a)<1/2.75?7.5625*n*t*t+e:2/2.75>t?n*(7.5625*(t-=1.5/2.75)*t+.75)+e:2.5/2.75>t?n*(7.5625*(t-=2.25/2.75)*t+.9375)+e:n*(7.5625*(t-=2.625/2.75)*t+.984375)+e},t.easeInOutBounce=function(e,n,a,r){return r/2>e?.5*t.easeInBounce(2*e,0,a,r)+n:.5*t.easeOutBounce(2*e-r,0,a,r)+.5*a+n},t}),n("ig/env",["require"],function(){function t(t){var e={},n={},a=t.match(/Web[kK]it[\/]{0,1}([\d.]+)/),r=t.match(/(Android);?[\s\/]+([\d.]+)?/),i=!!t.match(/\(Macintosh\; Intel /),o=t.match(/(iPad).*OS\s([\d_]+)/),s=t.match(/(iPod)(.*OS\s([\d_]+))?/),u=!o&&t.match(/(iPhone\sOS)\s([\d_]+)/),c=t.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),h=t.match(/Windows Phone ([\d.]+)/),l=c&&t.match(/TouchPad/),p=t.match(/Kindle\/([\d.]+)/),d=t.match(/Silk\/([\d._]+)/),m=t.match(/(BlackBerry).*Version\/([\d.]+)/),f=t.match(/(BB10).*Version\/([\d.]+)/),v=t.match(/(RIM\sTablet\sOS)\s([\d.]+)/),g=t.match(/PlayBook/),w=t.match(/Chrome\/([\d.]+)/)||t.match(/CriOS\/([\d.]+)/),y=t.match(/Firefox\/([\d.]+)/),b=t.match(/MSIE\s([\d.]+)/)||t.match(/Trident\/[\d](?=[^\?]+).*rv:([0-9.].)/),F=!w&&t.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/),S=F||t.match(/Version\/([\d.]+)([^S](Safari)|[^M]*(Mobile)[^S]*(Safari))/),x=t.match(/MicroMessenger\/([\d.]+)/),C=t.match(/baiduboxapp\/[^\/]+\/([\d.]+)_/)||t.match(/baiduboxapp\/([\d.]+)/)||t.match(/BaiduHD\/([\d.]+)/)||t.match(/FlyFlow\/([\d.]+)/)||t.match(/baidubrowser\/([\d.]+)/),M=t.match(/MQQBrowser\/([\d.]+)/)||t.match(/QQ\/([\d.]+)/),I=t.match(/UCBrowser\/([\d.]+)/),T=t.match(/SogouMobileBrowser\/([\d.]+)/),O=r&&t.match(/MiuiBrowser\/([\d.]+)/),P=t.match(/LBKIT/),A=t.match(/Mercury\/([\d.]+)/);return(n.webkit=!!a)&&(n.version=a[1]),r&&(e.android=!0,e.version=r[2]),u&&!s&&(e.ios=e.iphone=!0,e.version=u[2].replace(/_/g,".")),o&&(e.ios=e.ipad=!0,e.version=o[2].replace(/_/g,".")),s&&(e.ios=e.ipod=!0,e.version=s[3]?s[3].replace(/_/g,"."):null),h&&(e.wp=!0,e.version=h[1]),c&&(e.webos=!0,e.version=c[2]),l&&(e.touchpad=!0),m&&(e.blackberry=!0,e.version=m[2]),f&&(e.bb10=!0,e.version=f[2]),v&&(e.rimtabletos=!0,e.version=v[2]),g&&(n.playbook=!0),p&&(e.kindle=!0,e.version=p[1]),d&&(n.silk=!0,n.version=d[1]),!d&&e.android&&t.match(/Kindle Fire/)&&(n.silk=!0),w&&(n.chrome=!0,n.version=w[1]),y&&(n.firefox=!0,n.version=y[1]),b&&(n.ie=!0,n.version=b[1]),S&&(i||e.ios)&&(n.safari=!0,i&&(n.version=S[1])),F&&(n.webview=!0),x&&(n.wechat=!0,n.version=x[1]),C&&(delete n.webview,n.baidu=!0,n.version=C[1]),M&&(n.qq=!0,n.version=M[1]),I&&(delete n.webview,n.uc=!0,n.version=I[1]),T&&(delete n.webview,n.sogou=!0,n.version=T[1]),O&&(n.xiaomi=!0,n.version=O[1]),P&&(n.liebao=!0,n.version="0"),A&&(n.mercury=!0,n.version=A[1]),navigator.standalone&&(n.standalone=!0),e.tablet=!!(o||g||r&&!t.match(/Mobile/)||y&&t.match(/Tablet/)||b&&!t.match(/Phone/)&&t.match(/Touch/)),e.phone=!(e.tablet||e.ipod||!(r||u||c||m||f||w&&t.match(/Android/)||w&&t.match(/CriOS\/([\d.]+)/)||y&&t.match(/Mobile/)||b&&t.match(/Touch/))),{browser:n,os:e}}function e(t){t.audioData=!!window.Audio,t.webAudio=!(!window.AudioContext&&!window.webkitAudioContext);var e=document.createElement("audio"),n=!1;try{(n=!!e.canPlayType)&&(e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"")&&(t.ogg=!0),(e.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,"")||e.canPlayType("audio/opus;").replace(/^no$/,""))&&(t.opus=!0),e.canPlayType("audio/mpeg;").replace(/^no$/,"")&&(t.mp3=!0),e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,"")&&(t.wav=!0),(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/aac;").replace(/^no$/,""))&&(t.m4a=!0),e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")&&(t.webm=!0))}catch(a){}}var n=t(navigator.userAgent),a={browser:n.browser,os:n.os,supportOrientation:"number"==typeof window.orientation&&"object"==typeof window.onorientationchange,supportTouch:"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,supportGeolocation:null!=navigator.geolocation,isAndroid:n.os.android,isIOS:n.os.ios,isPhone:n.os.phone,isTablet:n.os.tablet,isMobile:n.os.phone||n.os.tablet};return e(a),a}),n("ig/Animation",["require","./util","./Event","./easing"],function(t){function e(t){return t=t||{},this.p={},n.extend(!0,this.p,{name:o++,source:{},target:null,range:null,tween:r.linear,repeat:!1,duration:1e3,fps:i},t),this.setup(),a.apply(this,this.p),this}var n=t("./util"),a=t("./Event"),r=t("./easing"),i=60,o=0;return e.prototype={constructor:e,setup:function(){var t=this.p;t.paused=!1,t.repeatCount=0,t.then=Date.now(),t.interval=1e3/t.fps,t.curFrame=0,t.curState={},t.initState={},t.frames=Math.ceil(t.duration*t.fps/1e3);var e=t.source,a=t.target,r=t.range;if(r){for(var i in r)t.curState[i]={from:parseFloat(parseFloat(e[i])-parseFloat(r[i])),cur:parseFloat(e[i]),to:parseFloat(parseFloat(e[i])+parseFloat(r[i]))};return this}if("array"!==n.getType(a)){for(var i in a)t.initState[i]=t.curState[i]={from:parseFloat(e[i]),cur:parseFloat(e[i]),to:parseFloat(a[i])};return this}t.animIndex=0,t.animLength=a.length;for(var o=0;o<t.animLength;o++)for(var i in a[o])0===o&&(t.curState[i]={from:parseFloat(e[i]),cur:parseFloat(e[i]),to:parseFloat(a[o][i])}),t.initState[i]={from:parseFloat(e[i]),cur:parseFloat(e[i]),to:parseFloat(a[o][i])};return this},play:function(){var t=this.p;return t.requestID&&this.stop(),t.paused=!1,this.step(),this},stop:function(){return window.cancelAnimationFrame(this.p.requestID),this},destroy:function(){this.stop(),this.clearEvents()},togglePause:function(){return this.p.paused=!this.p.paused,this},pause:function(){return this.p.paused=!0,this},resume:function(){return this.p.paused=!1,this},next:function(){this.stop();var t=this.p;return t.curFrame++,t.curFrame=t.curFrame>t.frames?t.frames:t.curFrame,this.step.call(this),this},prev:function(){this.stop();var t=this.p;return t.curFrame--,t.curFrame=t.curFrame<0?0:t.curFrame,this.step.call(this),this},gotoAndPlay:function(t){return this.stop(),this.p.curFrame=t,this.play.call(this),this},gotoAndStop:function(t){return this.stop(),this.p.curFrame=t,this.step.call(this),this},swapFromTo:function(){var t=this.p;if(t.curFrame=0,t.curState={},"array"===n.getType(t.target)){t.target.reverse(),t.animIndex=0,t.animLength=t.target.length;for(var e in t.target[t.animIndex])t.curState[e]=t.repeatCount%2===0?{from:t.initState[e].from,cur:t.initState[e].cur,to:t.initState[e].to}:{from:t.initState[e].to,cur:t.initState[e].to,to:t.initState[e].from}}else for(var e in t.target)t.curState[e]=t.repeatCount%2===0?{from:t.initState[e].from,cur:t.initState[e].cur,to:t.initState[e].to}:{from:t.initState[e].to,cur:t.initState[e].to,to:t.initState[e].from};return this},step:function(){var t=this,e=t.p;if(e.requestID=window.requestAnimationFrame(function(){return function(){t.step.call(t)}}(t)),!(e.paused||(e.now=Date.now(),e.delta=e.now-e.then,e.delta<=e.interval))){t.fire("step",{data:{source:e.source,instance:t}}),e.then=e.now-e.delta%e.interval;var n;for(var a in e.curState)n=e.tween(e.curFrame,e.curState[a].cur,e.curState[a].to-e.curState[a].cur,e.frames).toFixed(2),e.source[a]=parseFloat(n);if(e.curFrame++,!(e.curFrame<e.frames))if(e.range&&!e.rangeExec){e.curFrame=0;for(var a in e.curState)e.curState[a]={from:e.curState[a].to,cur:e.curState[a].to,to:e.curState[a].from};e.repeat?(e.repeatCount++,e.repeatCount%2===0&&t.fire("repeat",{data:{source:e.source,instance:t,repeatCount:e.repeatCount/2}})):e.rangeExec=!0}else if(e.animLength)if(t.fire("groupComplete",{data:{source:e.source,instance:t}}),e.animIndex<e.animLength-1){e.animIndex++,e.curFrame=0,e.curState={};var r=e.repeatCount%2===0;for(var a in e.target[e.animIndex])e.curState[a]={from:r?e.initState[a].from:e.initState[a].to,cur:r?e.initState[a].cur:e.initState[a].to,to:r?e.initState[a].to:e.initState[a].from}}else e.repeat?(e.repeatCount++,t.swapFromTo(),t.fire("repeat",{data:{source:e.source,instance:t,repeatCount:e.repeatCount}})):(t.stop(),e.paused=!1,t.fire("complete",{data:{source:e.source,instance:t}}));else e.repeat?(e.repeatCount++,t.swapFromTo(),t.fire("repeat",{data:{source:e.source,instance:t,repeatCount:e.repeatCount}})):(t.stop(),e.paused=!1,t.fire("complete",{data:{source:e.source,instance:t}}))}}},n.inherits(e,a),e}),n("ig/Vector",["require"],function(){function t(t,e){this.x=t||0,this.y=e||t||0}var e=Math.sqrt,n=Math.pow;return t.prototype={constructor:t,normalize:function(){var t=this.getMagnitude();return 0!==t&&(this.x/=t,this.y/=t),this},getMagnitude:function(){return e(n(this.x,2)+n(this.y,2))},add:function(e,n){var a=this.x+e.x,r=this.y+e.y;return n?new t(a,r):(this.x=a,this.y=r,this)},sub:function(e,n){var a=this.x-e.x,r=this.y-e.y;return n?new t(a,r):(this.x=a,this.y=r,this)},dot:function(t){return this.x*t.x+this.y*t.y},edge:function(t){return this.sub(t,!0)},perpendicular:function(e){var n=-this.x,a=this.y;return e?new t(n,a):(this.x=n,this.y=a,this)},normal:function(){return this.perpendicular(!0).normalize()}},t}),n("ig/Game",["require","./Event","./util","./env"],function(t){function e(t){if(this.p={},o.extend(!0,this.p,{name:"ig_game_"+c++,fps:u,canvas:null,maximize:!1,scaleFit:!0,width:h,height:p,maxWidth:l,maxHeight:d,horizontalPageScroll:null},t),!this.p.canvas)throw new Error("Game initialize must be require a canvas param");return this.p.paused=!1,this.p.stageStack=[],this.p.stages={},n.call(this),this._={},i.apply(this,this.p),this}function n(){var t=this.p;t.canvas=o.domWrap(t.canvas,document.createElement("div"),"ig-game-container-"+t.name),t.canvas.width=t.width,t.canvas.height=t.height;var e=parseInt(t.canvas.width,10),n=parseInt(t.canvas.height,10),i=t.maxWidth||5e3,u=t.maxHeight||5e3;if(t.maximize){document.body.style.padding=0,document.body.style.margin=0;var c,l=o.getType(t.horizontalPageScroll);c="number"===l?t.horizontalPageScroll:"boolean"===l?17:0,e=Math.min(window.innerWidth,i)-c,n=Math.min(window.innerHeight-5,u)}s.supportTouch&&(t.canvas.style.height=2*n+"px",window.scrollTo(0,1),e=Math.min(window.innerWidth,i),n=Math.min(window.innerHeight,u)),t.ctx=t.canvas.getContext("2d"),t.canvas.style.height=n+"px",t.canvas.style.width=e+"px",t.canvas.width=e,t.canvas.height=n,t.canvas.style.position="relative",t.width=t.canvas.width,t.cssWidth=t.canvas.style.width,t.height=t.canvas.height,t.cssHeight=t.canvas.style.height,a.call(this);var d=t.canvas.parentNode;d.style.width=e+"px",d.style.margin="0 auto",d.style.position="relative",t.scaleFit&&r.call(this);var m=this;return window.addEventListener(s.supportOrientation?"orientationchange":"resize",function(){setTimeout(function(){window.scrollTo(0,1),t.scaleFit&&r.call(m)},0)},!1),t.ratioX=t.width/h,t.ratioY=t.height/p,this}function a(){var t=this.p;t.offCanvas||(t.offCanvas=document.createElement("canvas"),t.offCtx=t.offCanvas.getContext("2d")),t.offCanvas.width=t.canvas.width,t.offCanvas.style.width=t.canvas.style.width,t.offCanvas.height=t.canvas.height,t.offCanvas.style.height=t.canvas.style.height}function r(){var t=this.p,e=window.innerWidth,n=window.innerHeight,r=e/n,i=t.canvas.width/t.canvas.height,o=r>i?n/t.canvas.height:e/t.canvas.width,s=t.canvas.width*o,u=t.canvas.height*o;if(t.canvas.style.width=s+"px",t.canvas.style.height=u+"px",t.canvas.parentNode&&(t.canvas.parentNode.style.width=s+"px",t.canvas.parentNode.style.height=u+"px"),i>=r){var c=(n-u)/2;t.canvas.style.top=c+"px"}t.width=t.canvas.width,t.cssWidth=t.canvas.style.width,t.height=t.canvas.height,t.cssHeight=t.canvas.style.height,t.scaleRatio=o,a.call(this)}var i=t("./Event"),o=t("./util"),s=t("./env"),u=60,c=0,h=320,l=5e3,p=480,d=5e3;return e.prototype={constructor:e,start:function(){var t=this._,e=this.p;e.paused=!1,t.startTime=Date.now(),t.now=0,t.interval=1e3/e.fps,t.delta=0,t.realFpsStart=Date.now(),t.realFps=0,t.realDelta=0,t.totalFrameCounter=0;var n="",a=o.noop,r=arguments.length;switch(r){case 1:"function"===o.getType(arguments[0])?a=arguments[0]:(n=arguments[0],a=o.noop);break;case 2:n=arguments[0],a=arguments[1]}if(n){for(var i=e.stageStack,s=-1,u=0,c=i.length;c>u;u++)if(i[u].name===n){s=u;break}this.swapStage(s,0)}var h=this;return e.requestID=window.requestAnimationFrame(function(){h.render.call(h,n)}),"function"===o.getType(a)&&a.call(h,{data:{startTime:t.startTime,interval:t.interval}}),this},render:function(){var t=this,e=t.p,n=t._;if(e.requestID=window.requestAnimationFrame(function(t){return function(){t.render.call(t)}}(t)),!e.paused){if(n.now=Date.now(),n.delta=n.now-n.startTime,n.delta>n.interval){n.totalFrameCounter++,n.startTime=n.now-n.delta%n.interval,t.fire("beforeGameRender",{data:{startTime:n.startTime,totalFrameCounter:n.totalFrameCounter}});var a=t.getCurrentStage();a&&(a.update(n.totalFrameCounter,n.delta),a.render()),t.fire("afterGameRender",{data:{startTime:n.startTime,totalFrameCounter:n.totalFrameCounter}})}n.realDelta>1e3?(n.realFpsStart=Date.now(),n.realDelta=0,t.fire("gameFPS",{data:{fps:n.realFps,totalFrameCounter:n.totalFrameCounter}}),n.realFps=0):(n.realDelta=Date.now()-n.realFpsStart,++n.realFps)}},getCurrentStage:function(){var t=this.p;return t.stageStack[0]},swapStage:function(t,e){var n=this.p,a=n.stageStack,r=a.length;if(t>=0&&r-1>=t&&e>=0&&r-1>=e){var i=a[t];a[t]=a[e],a[e]=i,this.sortStageIndex()}n.ctx.clearRect(0,0,n.canvas.width,n.canvas.height)}},o.inherits(e,i),e}),n("ig/Event",["require"],function(){function t(){this._events={}}var e="_observerGUID";return t.prototype={constructor:t,on:function(t,n){this._events||(this._events={});var a=this._events[t];return a||(a=this._events[t]=[]),n.hasOwnProperty(e)||(n[e]=+new Date),a.push(n),this},un:function(t,e){if(this._events){if(!e)return void(this._events[t]=[]);var n=this._events[t];if(n)for(var a=0;a<n.length;a++)n[a]===e&&(n.splice(a,1),a--);return this}},fire:function(t,n){1===arguments.length&&"object"==typeof t&&(n=t,t=n.type);var a=this["on"+t];if("function"==typeof a&&a.call(this,n),this._events){null==n&&(n={}),"[object Object]"!==Object.prototype.toString.call(n)&&(n={data:n}),n.type=t,n.target=this;var r={},i=this._events[t];if(i){i=i.slice();for(var o=0;o<i.length;o++){var s=i[o];r.hasOwnProperty(s[e])||s.call(this,n)}}if("*"!==t){var u=this._events["*"];if(!u)return;u=u.slice();for(var o=0;o<u.length;o++){var s=u[o];r.hasOwnProperty(s[e])||s.call(this,n)}}}},clearEvents:function(){this._events=null},enable:function(e){e._events={},e.on=t.prototype.on,e.un=t.prototype.un,e.fire=t.prototype.fire}},t}),n("ig/resourceLoader",["require","./ig","./util"],function(t){function e(t){var e=t.split(".");return e[e.length-1].toLowerCase()}var n=t("./ig"),a=t("./util"),r={png:"Image",jpg:"Image",gif:"Image",jpeg:"Image",ogg:"Audio",wav:"Audio",m4a:"Audio",mp3:"Audio"};n.resources={},n.loadOther=function(){var t,n,r,i,o=arguments.length;switch(o){case 1:t=n=arguments[0],r=i=a.noop;break;case 2:t=n=arguments[0],r=i=arguments[1];break;case 3:t=n=arguments[0],r=arguments[1],i=arguments[2];break;default:t=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3]}var s=e(n),u=new XMLHttpRequest;u.onreadystatechange=function(){4===u.readyState&&(200===u.status?"json"===s?r(t,JSON.parse(u.responseText)):r(t,u.responseText):i(n))},u.open("GET",n,!0),u.send(null)},n.loadImage=function(){var t,e,n,r,i=arguments.length;switch(i){case 1:t=e=arguments[0],n=r=a.noop;break;case 2:t=e=arguments[0],n=r=arguments[1];break;case 3:t=e=arguments[0],n=arguments[1],r=arguments[2];break;default:t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3]}var o=new Image;o.addEventListener("load",function(){n(t,o)}),o.addEventListener("error",function(){r(e)}),o.src=e},n.loadResource=function(t,i,o){var s=this;o=o||{},Array.isArray(t)||(t=[t]);for(var u=!1,c=function(t){u=!0,(o.errorCallback||function(t){throw"Loading Error: "+t}).call(s,t)},h=o.processCallback||a.noop,l=t.length,p=l,d=function(t,e){u||(n.resources[t]||(n.resources[t]=e),p--,h(l-p,l),0===p&&i&&i.call(s,n.resources))},m=o.customResourceTypes||{},f=a.extend({},r,m),v=0;l>v;v++){var g,w,y=t[v];if("object"===a.getType(y)?(g=y.id,w=y.src):g=w=y,n.resources.hasOwnProperty(g))d(g,n.resources[g]);else{var b=s["load"+f[e(w)]];b||(b=s.loadOther),b(g,w,d,c)}}}});var a,r=e("ig"),i="ig/util",o="util",s="";s?r[s]?r[s][o]=e(i):(a={},a[o]=e(i),r[s]=a):(a=e(i),o&&(r[o]=a));var a,i="ig/easing",o="easing",s="";s?r[s]?r[s][o]=e(i):(a={},a[o]=e(i),r[s]=a):(a=e(i),o&&(r[o]=a));var a,i="ig/env",o="env",s="";s?r[s]?r[s][o]=e(i):(a={},a[o]=e(i),r[s]=a):(a=e(i),o&&(r[o]=a));var a,i="ig/Animation",o="Animation",s="";s?r[s]?r[s][o]=e(i):(a={},a[o]=e(i),r[s]=a):(a=e(i),o&&(r[o]=a));var a,i="ig/Vector",o="Vector",s="";s?r[s]?r[s][o]=e(i):(a={},a[o]=e(i),r[s]=a):(a=e(i),o&&(r[o]=a));var a,i="ig/Game",o="Game",s="";s?r[s]?r[s][o]=e(i):(a={},a[o]=e(i),r[s]=a):(a=e(i),o&&(r[o]=a));var a,i="ig/Event",o="",s="";s?r[s]?r[s][o]=e(i):(a={},a[o]=e(i),r[s]=a):(a=e(i),o&&(r[o]=a));var a,i="ig/resourceLoader",o="",s="";s?r[s]?r[s][o]=e(i):(a={},a[o]=e(i),r[s]=a):(a=e(i),o&&(r[o]=a)),t.ig=r}(window);