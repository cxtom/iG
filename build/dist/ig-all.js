!function(t){var e,n;!function(){function t(t,e){if(!e)return t;if(0===t.indexOf(".")){var n=e.split("/"),i=t.split("/"),a=n.length-1,r=i.length,s=0,o=0;t:for(var u=0;r>u;u++)switch(i[u]){case"..":if(!(a>s))break t;s++,o++;break;case".":o++;break;default:break t}return n.length=a-s,i=i.slice(o),n.concat(i).join("/")}return t}function i(e){function n(n,s){if("string"==typeof n){var o=i[n];return o||(o=r(t(n,e)),i[n]=o),o}n instanceof Array&&(s=s||function(){},s.apply(this,a(n,s,e)))}var i={};return n}function a(n,i,a){for(var o=[],u=s[a],h=0,c=Math.min(n.length,i.length);c>h;h++){var p,l=t(n[h],a);switch(l){case"require":p=u&&u.require||e;break;case"exports":p=u.exports;break;case"module":p=u;break;default:p=r(l)}o.push(p)}return o}function r(t){var e=s[t];if(!e)throw new Error("No "+t);if(!e.defined){var n=e.factory,i=n.apply(this,a(e.deps||[],n,t));"undefined"!=typeof i&&(e.exports=i),e.defined=1}return e.exports}var s={};n=function(t,e,n){s[t]={id:t,deps:e,factory:n,defined:0,exports:{},require:i(t)}},e=i("")}(),n("ig",["ig/ig"],function(t){return t}),n("ig/ig",["require"],function(){window.requestAnimationFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(t){var e,n,i=this;setTimeout(function(){e=+new Date,t(e),n=+new Date,i.timeout=1e3/60-(n-e)},i.timeout)}}(),window.cancelAnimationFrame=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelAnimationFrame||window.mozCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.msCancelRequestAnimationFrame||window.oCancelAnimationFrame||window.oCancelRequestAnimationFrame||window.clearTimeout}();var t={};return t.STATUS={NORMAL:1,NOT_RENDER:2,NOT_UPDATE:3,NOT_RU:4,DESTROYED:5},t}),n("ig/util",["require"],function(){var t=Math.PI/180,e=180/Math.PI,n=Object.prototype,i={};return i.noop=function(){},i.getType=function(t){var e=n.toString.call(t).slice(8,-1);return e.toLowerCase()},i.isType=function(t,e){var n=i.getType(e);return t.toLowerCase()===n},i.isWindow=function(t){return null!=t&&t===t.window},i.isPlainObject=function(t){return"object"!==i.getType(t)||t.nodeType||i.isWindow(t)?!1:t.constructor&&!{}.hasOwnProperty.call(t.constructor.prototype,"isPrototypeOf")?!1:!0},i.extend=function(){var t,e,n,a,r,s,o=arguments[0]||{},u=1,h=arguments.length,c=!1;for("boolean"==typeof o&&(c=o,o=arguments[u]||{},u++),"object"==typeof o||i.isType("function",o)||(o={}),u===h&&(o=this,u--);h>u;u++)if(null!=(t=arguments[u]))for(e in t)if(t.hasOwnProperty(e)){if(n=o[e],a=t[e],o===a)continue;c&&a&&(i.isPlainObject(a)||(r=Array.isArray(a)))?(r?(r=!1,s=n&&Array.isArray(n)?n:[]):s=n&&i.isPlainObject(n)?n:{},o[e]=i.extend(c,s,a)):void 0!==a&&(o[e]=a)}return o},i.inherits=function(t,e){var n=function(){};n.prototype=e.prototype;var i=t.prototype,a=t.prototype=new n;for(var r in i)i.hasOwnProperty(r)&&(a[r]=i[r]);return t.prototype.constructor=t,t.superClass=e.prototype,t},i.deg2Rad=function(e){return e*t},i.rad2Deg=function(t){return t*e},i.randomInt=function(t,e){return Math.floor(Math.random()*(e-t+1)+t)},i.randomFloat=function(t,e){return Math.random()*(e-t)+t},i.removeArrByCondition=function(t,e){for(var n,i=-1,a=0,r=t.length;r>a;a++)if(n=t[a],e(n)){i=a;break}-1!==i&&t.splice(i,1)},i.window2Canvas=function(t,e,n){var i=t.getBoundingClientRect();return{x:Math.round(e-i.left*(t.width/i.width)),y:Math.round(n-i.top*(t.height/i.height))}},i.domWrap=function(t,e,n){return t.parentNode.insertBefore(e,t),e.appendChild(t),e.id=n||"ig-create-dom-"+Date.now(),t},i.getElementOffset=function(t){for(var e=t.offsetLeft,n=t.offsetTop;(t=t.offsetParent)&&t!=document.body&&t!=document;)e+=t.offsetLeft,n+=t.offsetTop;return{x:e,y:n}},i}),n("ig/easing",["require"],function(){var t={};return t.linear=function(t,e,n,i){return n*t/i+e},t.easeInQuad=function(t,e,n,i){return n*(t/=i)*t+e},t.easeOutQuad=function(t,e,n,i){return-n*(t/=i)*(t-2)+e},t.easeInOutQuad=function(t,e,n,i){return(t/=i/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e},t.easeInCubic=function(t,e,n,i){return n*(t/=i)*t*t+e},t.easeOutCubic=function(t,e,n,i){return n*((t=t/i-1)*t*t+1)+e},t.easeInOutCubic=function(t,e,n,i){return(t/=i/2)<1?n/2*t*t*t+e:n/2*((t-=2)*t*t+2)+e},t.easeInQuart=function(t,e,n,i){return n*(t/=i)*t*t*t+e},t.easeOutQuart=function(t,e,n,i){return-n*((t=t/i-1)*t*t*t-1)+e},t.easeInOutQuart=function(t,e,n,i){return(t/=i/2)<1?n/2*t*t*t*t+e:-n/2*((t-=2)*t*t*t-2)+e},t.easeInQuint=function(t,e,n,i){return n*(t/=i)*t*t*t*t+e},t.easeOutQuint=function(t,e,n,i){return n*((t=t/i-1)*t*t*t*t+1)+e},t.easeInOutQuint=function(t,e,n,i){return(t/=i/2)<1?n/2*t*t*t*t*t+e:n/2*((t-=2)*t*t*t*t+2)+e},t.easeInSine=function(t,e,n,i){return-n*Math.cos(t/i*(Math.PI/2))+n+e},t.easeOutSine=function(t,e,n,i){return n*Math.sin(t/i*(Math.PI/2))+e},t.easeInOutSine=function(t,e,n,i){return-n/2*(Math.cos(Math.PI*t/i)-1)+e},t.easeInExpo=function(t,e,n,i){return 0===t?e:n*Math.pow(2,10*(t/i-1))+e},t.easeOutExpo=function(t,e,n,i){return t===i?e+n:n*(-Math.pow(2,-10*t/i)+1)+e},t.easeInOutExpo=function(t,e,n,i){return 0===t?e:t===i?e+n:(t/=i/2)<1?n/2*Math.pow(2,10*(t-1))+e:n/2*(-Math.pow(2,-10*--t)+2)+e},t.easeInCirc=function(t,e,n,i){return-n*(Math.sqrt(1-(t/=i)*t)-1)+e},t.easeOutCirc=function(t,e,n,i){return n*Math.sqrt(1-(t=t/i-1)*t)+e},t.easeInOutCirc=function(t,e,n,i){return(t/=i/2)<1?-n/2*(Math.sqrt(1-t*t)-1)+e:n/2*(Math.sqrt(1-(t-=2)*t)+1)+e},t.easeInElastic=function(t,e,n,i,a,r){if(0===t)return e;if(1===(t/=i))return e+n;r||(r=.3*i);var s;return!a||a<Math.abs(n)?(a=n,s=r/4):s=r/(2*Math.PI)*Math.asin(n/a),-(a*Math.pow(2,10*(t-=1))*Math.sin(2*(t*i-s)*Math.PI/r))+e},t.easeOutElastic=function(t,e,n,i,a,r){if(0===t)return e;if(1===(t/=i))return e+n;r||(r=.3*i);var s;return!a||a<Math.abs(n)?(a=n,s=r/4):s=r/(2*Math.PI)*Math.asin(n/a),a*Math.pow(2,-10*t)*Math.sin(2*(t*i-s)*Math.PI/r)+n+e},t.easeInOutElastic=function(t,e,n,i,a,r){if(0===t)return e;if(2===(t/=i/2))return e+n;r||(r=.3*i*1.5);var s;return!a||a<Math.abs(n)?(a=n,s=r/4):s=r/(2*Math.PI)*Math.asin(n/a),1>t?-.5*a*Math.pow(2,10*(t-=1))*Math.sin(2*(t*i-s)*Math.PI/r)+e:a*Math.pow(2,-10*(t-=1))*Math.sin(2*(t*i-s)*Math.PI/r)*.5+n+e},t.easeInBack=function(t,e,n,i,a){return void 0===a&&(a=1.70158),n*(t/=i)*t*((a+1)*t-a)+e},t.easeOutBack=function(t,e,n,i,a){return void 0===a&&(a=1.70158),n*((t=t/i-1)*t*((a+1)*t+a)+1)+e},t.easeInOutBack=function(t,e,n,i,a){return void 0===a&&(a=1.70158),(t/=i/2)<1?n/2*t*t*(((a*=1.525)+1)*t-a)+e:n/2*((t-=2)*t*(((a*=1.525)+1)*t+a)+2)+e},t.easeInBounce=function(e,n,i,a){return i-t.easeOutBounce(a-e,0,i,a)+n},t.easeOutBounce=function(t,e,n,i){return(t/=i)<1/2.75?7.5625*n*t*t+e:2/2.75>t?n*(7.5625*(t-=1.5/2.75)*t+.75)+e:2.5/2.75>t?n*(7.5625*(t-=2.25/2.75)*t+.9375)+e:n*(7.5625*(t-=2.625/2.75)*t+.984375)+e},t.easeInOutBounce=function(e,n,i,a){return a/2>e?.5*t.easeInBounce(2*e,0,i,a)+n:.5*t.easeOutBounce(2*e-a,0,i,a)+.5*i+n},t}),n("ig/env",["require"],function(){function t(t){var e={},n={},i=t.match(/Web[kK]it[\/]{0,1}([\d.]+)/),a=t.match(/(Android);?[\s\/]+([\d.]+)?/),r=!!t.match(/\(Macintosh\; Intel /),s=t.match(/(iPad).*OS\s([\d_]+)/),o=t.match(/(iPod)(.*OS\s([\d_]+))?/),u=!s&&t.match(/(iPhone\sOS)\s([\d_]+)/),h=t.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),c=t.match(/Windows Phone ([\d.]+)/),p=h&&t.match(/TouchPad/),l=t.match(/Kindle\/([\d.]+)/),m=t.match(/Silk\/([\d._]+)/),f=t.match(/(BlackBerry).*Version\/([\d.]+)/),d=t.match(/(BB10).*Version\/([\d.]+)/),g=t.match(/(RIM\sTablet\sOS)\s([\d.]+)/),v=t.match(/PlayBook/),y=t.match(/Chrome\/([\d.]+)/)||t.match(/CriOS\/([\d.]+)/),w=t.match(/Firefox\/([\d.]+)/),b=t.match(/MSIE\s([\d.]+)/)||t.match(/Trident\/[\d](?=[^\?]+).*rv:([0-9.].)/),x=!y&&t.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/),S=x||t.match(/Version\/([\d.]+)([^S](Safari)|[^M]*(Mobile)[^S]*(Safari))/),O=t.match(/MicroMessenger\/([\d.]+)/),F=t.match(/baiduboxapp\/[^\/]+\/([\d.]+)_/)||t.match(/baiduboxapp\/([\d.]+)/)||t.match(/BaiduHD\/([\d.]+)/)||t.match(/FlyFlow\/([\d.]+)/)||t.match(/baidubrowser\/([\d.]+)/),C=t.match(/MQQBrowser\/([\d.]+)/)||t.match(/QQ\/([\d.]+)/),T=t.match(/UCBrowser\/([\d.]+)/),M=t.match(/SogouMobileBrowser\/([\d.]+)/),P=a&&t.match(/MiuiBrowser\/([\d.]+)/),I=t.match(/LBKIT/),A=t.match(/Mercury\/([\d.]+)/);return(n.webkit=!!i)&&(n.version=i[1]),a&&(e.android=!0,e.version=a[2]),u&&!o&&(e.ios=e.iphone=!0,e.version=u[2].replace(/_/g,".")),s&&(e.ios=e.ipad=!0,e.version=s[2].replace(/_/g,".")),o&&(e.ios=e.ipod=!0,e.version=o[3]?o[3].replace(/_/g,"."):null),c&&(e.wp=!0,e.version=c[1]),h&&(e.webos=!0,e.version=h[2]),p&&(e.touchpad=!0),f&&(e.blackberry=!0,e.version=f[2]),d&&(e.bb10=!0,e.version=d[2]),g&&(e.rimtabletos=!0,e.version=g[2]),v&&(n.playbook=!0),l&&(e.kindle=!0,e.version=l[1]),m&&(n.silk=!0,n.version=m[1]),!m&&e.android&&t.match(/Kindle Fire/)&&(n.silk=!0),y&&(n.chrome=!0,n.version=y[1]),w&&(n.firefox=!0,n.version=w[1]),b&&(n.ie=!0,n.version=b[1]),S&&(r||e.ios)&&(n.safari=!0,r&&(n.version=S[1])),x&&(n.webview=!0),O&&(n.wechat=!0,n.version=O[1]),F&&(delete n.webview,n.baidu=!0,n.version=F[1]),C&&(n.qq=!0,n.version=C[1]),T&&(delete n.webview,n.uc=!0,n.version=T[1]),M&&(delete n.webview,n.sogou=!0,n.version=M[1]),P&&(n.xiaomi=!0,n.version=P[1]),I&&(n.liebao=!0,n.version="0"),A&&(n.mercury=!0,n.version=A[1]),navigator.standalone&&(n.standalone=!0),e.tablet=!!(s||v||a&&!t.match(/Mobile/)||w&&t.match(/Tablet/)||b&&!t.match(/Phone/)&&t.match(/Touch/)),e.phone=!(e.tablet||e.ipod||!(a||u||h||f||d||y&&t.match(/Android/)||y&&t.match(/CriOS\/([\d.]+)/)||w&&t.match(/Mobile/)||b&&t.match(/Touch/))),{browser:n,os:e}}function e(t){t.audioData=!!window.Audio,t.webAudio=!(!window.AudioContext&&!window.webkitAudioContext);var e=document.createElement("audio"),n=!1;try{(n=!!e.canPlayType)&&(e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"")&&(t.ogg=!0),(e.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,"")||e.canPlayType("audio/opus;").replace(/^no$/,""))&&(t.opus=!0),e.canPlayType("audio/mpeg;").replace(/^no$/,"")&&(t.mp3=!0),e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,"")&&(t.wav=!0),(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/aac;").replace(/^no$/,""))&&(t.m4a=!0),e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")&&(t.webm=!0))}catch(i){}}var n=t(navigator.userAgent),i={browser:n.browser,os:n.os,supportOrientation:"number"==typeof window.orientation&&"object"==typeof window.onorientationchange,supportTouch:"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,supportGeolocation:null!=navigator.geolocation,isAndroid:n.os.android,isIOS:n.os.ios,isPhone:n.os.phone,isTablet:n.os.tablet,isMobile:n.os.phone||n.os.tablet};return e(i),i}),n("ig/Animation",["require","./util","./Event","./easing"],function(t){function e(t){return t=t||{},this.p={},n.extend(!0,this.p,{name:s++,source:{},target:null,range:null,tween:a.linear,repeat:!1,duration:1e3,fps:r},t),this.setup(),i.call(this,this.p),this}var n=t("./util"),i=t("./Event"),a=t("./easing"),r=60,s=0;return e.prototype={constructor:e,setup:function(){var t=this.p;t.paused=!1,t.repeatCount=0,t.then=Date.now(),t.interval=1e3/t.fps,t.curFrame=0,t.curState={},t.initState={},t.frames=Math.ceil(t.duration*t.fps/1e3);var e=t.source,i=t.target,a=t.range;if(a){for(var r in a)t.curState[r]={from:parseFloat(parseFloat(e[r])-parseFloat(a[r])),cur:parseFloat(e[r]),to:parseFloat(parseFloat(e[r])+parseFloat(a[r]))};return this}if("array"!==n.getType(i)){for(var r in i)t.initState[r]=t.curState[r]={from:parseFloat(e[r]),cur:parseFloat(e[r]),to:parseFloat(i[r])};return this}t.animIndex=0,t.animLength=i.length;for(var s=0;s<t.animLength;s++)for(var r in i[s])0===s&&(t.curState[r]={from:parseFloat(e[r]),cur:parseFloat(e[r]),to:parseFloat(i[s][r])}),t.initState[r]={from:parseFloat(e[r]),cur:parseFloat(e[r]),to:parseFloat(i[s][r])};return this},play:function(){var t=this.p;return t.requestID&&this.stop(),t.paused=!1,this.step(),this},stop:function(){return window.cancelAnimationFrame(this.p.requestID),this},destroy:function(){this.stop(),this.clearEvents()},togglePause:function(){return this.p.paused=!this.p.paused,this},pause:function(){return this.p.paused=!0,this},resume:function(){return this.p.paused=!1,this},next:function(){this.stop();var t=this.p;return t.curFrame++,t.curFrame=t.curFrame>t.frames?t.frames:t.curFrame,this.step.call(this),this},prev:function(){this.stop();var t=this.p;return t.curFrame--,t.curFrame=t.curFrame<0?0:t.curFrame,this.step.call(this),this},gotoAndPlay:function(t){return this.stop(),this.p.curFrame=t,this.play.call(this),this},gotoAndStop:function(t){return this.stop(),this.p.curFrame=t,this.step.call(this),this},swapFromTo:function(){var t=this.p;if(t.curFrame=0,t.curState={},"array"===n.getType(t.target)){t.target.reverse(),t.animIndex=0,t.animLength=t.target.length;for(var e in t.target[t.animIndex])t.curState[e]=t.repeatCount%2===0?{from:t.initState[e].from,cur:t.initState[e].cur,to:t.initState[e].to}:{from:t.initState[e].to,cur:t.initState[e].to,to:t.initState[e].from}}else for(var e in t.target)t.curState[e]=t.repeatCount%2===0?{from:t.initState[e].from,cur:t.initState[e].cur,to:t.initState[e].to}:{from:t.initState[e].to,cur:t.initState[e].to,to:t.initState[e].from};return this},step:function(){var t=this,e=t.p;if(e.requestID=window.requestAnimationFrame(function(){return function(){t.step.call(t)}}(t)),!(e.paused||(e.now=Date.now(),e.delta=e.now-e.then,e.delta<=e.interval))){t.fire("step",{data:{source:e.source,instance:t}}),e.then=e.now-e.delta%e.interval;var n;for(var i in e.curState)n=e.tween(e.curFrame,e.curState[i].cur,e.curState[i].to-e.curState[i].cur,e.frames).toFixed(2),e.source[i]=parseFloat(n);if(e.curFrame++,!(e.curFrame<e.frames))if(e.range&&!e.rangeExec){e.curFrame=0;for(var i in e.curState)e.curState[i]={from:e.curState[i].to,cur:e.curState[i].to,to:e.curState[i].from};e.repeat?(e.repeatCount++,e.repeatCount%2===0&&t.fire("repeat",{data:{source:e.source,instance:t,repeatCount:e.repeatCount/2}})):e.rangeExec=!0}else if(e.animLength)if(t.fire("groupComplete",{data:{source:e.source,instance:t}}),e.animIndex<e.animLength-1){e.animIndex++,e.curFrame=0,e.curState={};var a=e.repeatCount%2===0;for(var i in e.target[e.animIndex])e.curState[i]={from:a?e.initState[i].from:e.initState[i].to,cur:a?e.initState[i].cur:e.initState[i].to,to:a?e.initState[i].to:e.initState[i].from}}else e.repeat?(e.repeatCount++,t.swapFromTo(),t.fire("repeat",{data:{source:e.source,instance:t,repeatCount:e.repeatCount}})):(t.stop(),e.paused=!1,t.fire("complete",{data:{source:e.source,instance:t}}));else e.repeat?(e.repeatCount++,t.swapFromTo(),t.fire("repeat",{data:{source:e.source,instance:t,repeatCount:e.repeatCount}})):(t.stop(),e.paused=!1,t.fire("complete",{data:{source:e.source,instance:t}}))}}},n.inherits(e,i),e}),n("ig/Game",["require","./Event","./util","./env","./Stage","./resourceLoader"],function(t){function e(t){if(this.p={},s.extend(!0,this.p,{name:"ig_game_"+p++,fps:c,canvas:null,maximize:!1,scaleFit:!0,width:l,height:f,maxWidth:m,maxHeight:d,horizontalPageScroll:null},t),!this.p.canvas)throw new Error("Game initialize must be require a canvas param");return this.p.paused=!1,this.p.stageStack=[],this.p.stages={},n.call(this),this._={},this.resources=this.p.resources=h.resources,r.call(this,this.p),this}function n(){var t=this.p;t.canvas=s.domWrap(t.canvas,document.createElement("div"),"ig-game-container-"+t.name),t.canvas.width=t.width,t.canvas.height=t.height;var e=parseInt(t.canvas.width,10),n=parseInt(t.canvas.height,10),r=t.maxWidth||5e3,u=t.maxHeight||5e3;if(t.maximize){document.body.style.padding=0,document.body.style.margin=0;var h,c=s.getType(t.horizontalPageScroll);h="number"===c?t.horizontalPageScroll:"boolean"===c?17:0,e=Math.min(window.innerWidth,r)-h,n=Math.min(window.innerHeight-5,u)}o.supportTouch&&(t.canvas.style.height=2*n+"px",window.scrollTo(0,1),e=Math.min(window.innerWidth,r),n=Math.min(window.innerHeight,u)),t.ctx=t.canvas.getContext("2d"),t.canvas.style.height=n+"px",t.canvas.style.width=e+"px",t.canvas.width=e,t.canvas.height=n,t.canvas.style.position="relative",t.width=t.canvas.width,t.cssWidth=t.canvas.style.width,t.height=t.canvas.height,t.cssHeight=t.canvas.style.height,i.call(this);var p=t.canvas.parentNode;p.style.width=e+"px",p.style.margin="0 auto",p.style.position="relative",t.scaleFit&&a.call(this);var m=this;return window.addEventListener(o.supportOrientation?"orientationchange":"resize",function(){setTimeout(function(){window.scrollTo(0,1),t.scaleFit&&a.call(m)},0)},!1),t.ratioX=t.width/l,t.ratioY=t.height/f,this}function i(){var t=this.p;t.offCanvas||(t.offCanvas=document.createElement("canvas"),t.offCtx=t.offCanvas.getContext("2d")),t.offCanvas.width=t.canvas.width,t.offCanvas.style.width=t.canvas.style.width,t.offCanvas.height=t.canvas.height,t.offCanvas.style.height=t.canvas.style.height}function a(){var t=this.p,e=window.innerWidth,n=window.innerHeight,a=e/n,r=t.canvas.width/t.canvas.height,s=a>r?n/t.canvas.height:e/t.canvas.width,o=t.canvas.width*s,u=t.canvas.height*s;if(t.canvas.style.width=o+"px",t.canvas.style.height=u+"px",t.canvas.parentNode&&(t.canvas.parentNode.style.width=o+"px",t.canvas.parentNode.style.height=u+"px"),r>=a){var h=(n-u)/2;t.canvas.style.top=h+"px"}t.width=t.canvas.width,t.cssWidth=t.canvas.style.width,t.height=t.canvas.height,t.cssHeight=t.canvas.style.height,t.scaleRatio=s,i.call(this)}var r=t("./Event"),s=t("./util"),o=t("./env"),u=t("./Stage"),h=t("./resourceLoader"),c=60,p=0,l=320,m=5e3,f=480,d=5e3;return e.prototype={constructor:e,start:function(){var t=this._,e=this.p;e.paused=!1,t.startTime=Date.now(),t.now=0,t.interval=1e3/e.fps,t.delta=0,t.realFpsStart=Date.now(),t.realFps=0,t.realDelta=0,t.totalFrameCounter=0;var n="",i=s.noop,a=arguments.length;switch(a){case 1:"function"===s.getType(arguments[0])?i=arguments[0]:(n=arguments[0],i=s.noop);break;case 2:n=arguments[0],i=arguments[1]}if(n){for(var r=e.stageStack,o=-1,u=0,h=r.length;h>u;u++)if(r[u].p.name===n){o=u;break}this.swapStage(o,0)}this.stop();var c=this;return c.render.call(c,n),"function"===s.getType(i)&&i.call(c,{data:{startTime:t.startTime,interval:t.interval}}),this},render:function(){var t=this,e=t.p,n=t._;if(n.requestID=window.requestAnimationFrame(function(t){return function(){t.render.call(t)}}(t)),!e.paused){if(n.now=Date.now(),n.delta=n.now-n.startTime,n.delta>n.interval){n.totalFrameCounter++,n.startTime=n.now-n.delta%n.interval,t.fire("beforeGameRender",{data:{startTime:n.startTime,totalFrameCounter:n.totalFrameCounter}});var i=t.getCurrentStage();i&&(i.update(n.totalFrameCounter,n.delta/1e3),i.render()),t.fire("afterGameRender",{data:{startTime:n.startTime,totalFrameCounter:n.totalFrameCounter}})}n.realDelta>1e3?(n.realFpsStart=Date.now(),n.realDelta=0,t.fire("gameFPS",{data:{fps:n.realFps,totalFrameCounter:n.totalFrameCounter}}),n.realFps=0):(n.realDelta=Date.now()-n.realFpsStart,++n.realFps)}},pause:function(){return this.p.paused=!0,this},resume:function(){return this.p.paused=!1,this},stop:function(){return window.cancelAnimationFrame(this._.requestID),this},destroy:function(){this.stop(),this.clearAllStage(),this.clearEvents()},createStage:function(t){var e=this.p;t=s.extend(!0,{},{canvas:e.canvas,offCanvas:e.offCanvas,gameOwner:this},t);var n=new u(t);return this.pushStage(n),n},pushStage:function(t){var e=this.p;this.getStageByName(t.name)||(t.gameOwner=this,e.stageStack.push(t),e.stages[t.p.name]=t,this.sortStageIndex())},popStage:function(){var t=this.p,e=t.stageStack.pop();e&&(delete t.stages[e.name],this.sortStageIndex())},sortStageIndex:function(){for(var t=this.p.stageStack,e=t.length-1,n=0;e>=0;e--,n++)t[e].p.zIndex=n},removeStageByName:function(t){var e=this.getStageByName(t);if(e){var n=this.p;delete n.stages[e.name];var i=n.stageStack;s.removeArrByCondition(i,function(e){return e.name===t}),this.sortStageIndex()}},getCurrentStage:function(){var t=this.p;return t.stageStack[0]},getStageStack:function(){return this.p.stageStack},getStageByName:function(t){return this.p.stages[t]},changeStage:function(t){var e=this.p;if(t){for(var n=e.stageStack,i=-1,a=0,r=n.length;r>a;a++)if(n[a].name===t){i=a;break}this.swapStage(i,0)}},swapStageByName:function(t,e){for(var n=this.p,i=n.stageStack,a=i.length,r=-1,s=-1,o=0;a>o;o++)i[o].p.name===t&&(r=o),i[o].p.name===e&&(s=o);return-1!==r&&-1!==s?this.swapStage(r,s):this},swapStage:function(t,e){var n=this.p,i=n.stageStack,a=i.length;if(t>=0&&a-1>=t&&e>=0&&a-1>=e){var r=i[t];i[t]=i[e],i[e]=r,this.sortStageIndex()}return n.ctx.clearRect(0,0,n.canvas.width,n.canvas.height),this},getStageIndex:function(t){return t.p.zIndex},clearAllStage:function(){for(var t=this.p,e=t.stageStack,n=0,i=e.length;i>n;n++)e[n].destroy();t.stages={},t.stageStack=[]},loadOther:function(t,e,n,i){return h.loadOther(t,e,n,i)},loadImage:function(t,e,n,i){return h.loadImage(t,e,n,i)},loadResource:function(t,e,n){return h.loadResource(t,e,n)}},s.inherits(e,r),e}),n("ig/Stage",["require","./Event","./util","./DisplayObject","./domEvt","./ig"],function(t){function e(t){return this.p={},h.extend(!0,this.p,{name:"ig_stage_"+d++,canvas:t.canvas,ctx:t.canvas.getContext("2d"),offCanvas:t.offCanvas,offCtx:t.offCanvas.getContext("2d"),width:t.gameOwner.p.width,height:t.gameOwner.p.height,cssWidth:t.gameOwner.p.cssWidth,cssHeight:t.gameOwner.p.cssHeight},t),this.p.displayObjectList=[],this.p.displayObjects={},n.call(this),this}function n(){i.call(this),p.initMouse(this)}function i(){var t=this;return p.events.forEach(function(e){var n=p.fireEvt[e];n&&t.on(e,n)}),t}function a(t){var e=this.p,n=e.parallax;n&&(n.anims&&"array"===h.getType(n.anims)?(n.animInterval=n.animInterval||1e4,n.curAnim||(n.curAnim=n.anims[0]),t%n.animInterval===0&&(void 0===n.time&&(n.time=0),n.time++,n.time===n.anims.length&&(n.time=0),n.curAnim=n.anims[n.time])):n.curAnim={aX:n.aX,aY:n.aY},n.vX=(n.vX+n.curAnim.aX)%n.image.width,n.vY=(n.vY+n.curAnim.aY)%n.image.height)}function r(){var t=this.p,e=t.parallax;if(e){var n=t.offCtx;"no-repeat"!==e.repeat&&s.call(e,n);for(var i=e.image.width,a=e.image.height,r={width:0,height:0},u=0;a>u;u+=r.height)for(var h=0;i>h;h+=r.width){var c={x:e.x+h,y:e.y+u},p={width:i-h,height:a-u},l={x:0,y:0};0===h&&(l.x=e.vX),0===u&&(l.y=e.vY),r=o.call(e,n,c,p,l,i,a)}}}function s(t){t.save(),t.fillStyle=t.createPattern(this.image,this.repeat),t.fillRect(this.x,this.y,t.canvas.width,t.canvas.height),t.restore(),f.src||(f.src=t.canvas.toDataURL(),this.image=f)}function o(t,e,n,i,a,r){var s=Math.abs(i.x)%a,o=Math.abs(i.y)%r,u=i.x<0?a-s:s,h=i.y<0?r-o:o,c=n.width<a-u?n.width:a-u,p=n.height<r-h?n.height:r-h;return t.drawImage(this.image,u,h,c,p,e.x,e.y,c,p),{width:c,height:p}}var u=t("./Event"),h=t("./util"),c=t("./DisplayObject"),p=t("./domEvt"),l=t("./ig"),m=l.STATUS,f=new Image,d=0;return e.prototype={constructor:e,clear:function(){var t=this.p;return t.offCtx.clearRect(0,0,t.width,t.height),this},getIndex:function(){return this.p.zIndex},setBgColor:function(t){var e=this.p;return e.bgColor=t,e.canvas.style.backgroundColor=e.bgColor||"transparent",this},setBgImg:function(t,e){var n;"htmlimageelement"===h.getType(t)?n=t.src:"string"===h.getType(t)&&(n=t);var i="",a="",r="",s=this.p;switch(e){case"center":i="no-repeat",a="center";break;case"full":r=s.cssWidth+"px "+s.cssHeight+"px"}return n?(s.canvas.style.backgroundImage="url("+n+")",s.canvas.style.backgroundRepeat=i,s.canvas.style.backgroundPosition=a,s.canvas.style.backgroundSize=r):(s.canvas.style.backgroundImage="",s.canvas.style.backgroundRepeat="",s.canvas.style.backgroundPosition="",s.canvas.style.backgroundSize=""),this},setParallax:function(t){if(t=t||{},!t.image)throw new Error("Parallax must be require a image param");t.repeat=t.repeat&&-1!==["repeat","repeat-x","repeat-y"].indexOf(t.repeat)?t.repeat:"no-repeat";var e=this.p;return e.parallax=h.extend({},{x:0,y:0,vX:0,vY:0,aX:0,aY:0},t),this},update:function(t,e){0>e&&(e=1/60),e>1/15&&(e=1/15),a.call(this,t);for(var n,i=this.p.displayObjectList,r=i.length,s=0;r>s;s++){var o=i[s];o&&(n=o.p.status,(n===m.NORMAL||n===m.NOT_RENDER)&&o.update(e))}},render:function(){this.clear(),this.fire("beforeStageRender");var t=this.p;t.offCtx.save(),t.offCtx.clearRect(0,0,t.offCanvas.width,t.offCanvas.height),r.call(this),this.sortDisplayObject();for(var e,n=t.displayObjectList,i=n.length,a=0;i>a;a++){var s=n[a];s&&(e=s.p.status,e===m.DESTROYED?this.removeDisplayObject(s):(e===m.NORMAL||e===m.NOT_UPDATE)&&s.render(t.offCtx))}t.offCtx.restore(),t.ctx.drawImage(t.offCanvas,0,0),this.fire("afterStageRender")},sortDisplayObject:function(){this.p.displayObjectList.sort(function(t,e){return t.p.zIndex-e.p.zIndex})},getDisplayObjectList:function(){return this.p.displayObjectList},getDisplayObjectByName:function(t){return this.p.displayObjects[t]},createDisplayObject:function(t){var e=new c(t);return this.addDisplayObject(e),e},addDisplayObject:function(t){if(t&&!this.getDisplayObjectByName(t.p.name)){var e=this.p;t.stageOwner=t.p.stageOwner=this,e.displayObjectList.push(t),e.displayObjects[t.p.name]=t}return this},removeDisplayObject:function(t){return t&&this.removeDisplayObjectByName(t.p.name),this},removeDisplayObjectByName:function(t){var e=this.p,n=e.displayObjects[t];if(n){delete e.displayObjects[n.p.name];var i=e.displayObjectList;h.removeArrByCondition(i,function(e){return e.p.name===t})}return this},clearAllDisplayObject:function(){var t=this.p;t.displayObjectList=[],t.displayObjects={}},destroy:function(){this.clearAllDisplayObject(),this.clearEvents()}},h.inherits(e,u),e}),n("ig/DisplayObject",["require","./Event","./util","./Animation","./ig","./Matrix"],function(t){function e(t){return this.p={},i.extend(!0,this.p,{name:"ig_displayobject_"+u++,x:0,y:0,width:0,height:0,cX:0,cY:0,radius:0,scaleX:1,scaleY:1,angle:0,alpha:1,zIndex:0,fillStyle:null,strokeStyle:null,image:null,vX:0,vY:0,aX:0,aY:0,frictionX:1,frictionY:1,status:o.NORMAL,mouseEnable:!0,captureFunc:i.noop,moveFunc:i.noop,releaseFunc:i.noop,debug:!1},t),this.children=[],this.matrix=new s,this.setPosX(this.p.x),this.setPosY(this.p.y),n.call(this,this.p),this}var n=t("./Event"),i=t("./util"),a=t("./Animation"),r=t("./ig"),s=t("./Matrix"),o=r.STATUS,u=0;return e.prototype={constructor:e,changeStatus:function(t){return this.p.status=t||this.p.status,this},setCaptureFunc:function(t){return this.p.captureFunc=t||i.noop,this},setMoveFunc:function(t){return this.p.moveFunc=t||i.noop,this},setReleaseFunc:function(t){return this.p.releaseFunc=t||i.noop,this},setPosX:function(t){return this.p.x=t||0,this},setPosY:function(t){return this.p.y=t||0,this},setAccelerationX:function(t){return this.p.aX=t||this.p.aX,this},setAccelerationY:function(t){return this.p.aY=t||this.p.aY,this},setFrictionX:function(t){return this.p.frictionX=t||this.p.frictionX,this},setFrictionY:function(t){return this.p.frictionY=t||this.p.frictionY,this},move:function(t,e){return this.p.x+=t,this.p.y+=e,this},moveStep:function(){var t=this.p;return t.vX+=t.aX,t.vX*=t.frictionX,t.x+=t.vX,t.vY+=t.aY,t.vY*=t.frictionY,t.y+=t.vY,this},rotate:function(t){var e=this.p.stageOwner.p.offCtx;return e.save(),e.rotate(i.deg2Rad(t||this.p.angle)),e.restore(),this},setAnimate:function(t){var e=this,n=i.extend(!0,{},{fps:60,duration:1e3,source:e.p,target:{}},t),r="function"===i.getType(n.stepFunc)?n.stepFunc:i.noop,s="function"===i.getType(n.repeatFunc)?n.repeatFunc:i.noop,o="function"===i.getType(n.groupCompleteFunc)?n.groupCompleteFunc:i.noop,u="function"===i.getType(n.completeFunc)?n.completeFunc:i.noop;this.animate=new a(n).play().on("step",function(t){e.p=t.data.source,r(t)}).on("repeat",function(t){s(t)}).on("groupComplete",function(t){o(t)}).on("complete",function(t){u(t)})},stopAnimate:function(){return this.animate&&this.animate.stop(),console.warn(this.animate),this},destroyAnimate:function(){return this.animate&&this.animate.destroy(),this},update:function(){return this},render:function(){return this},hitTestPoint:function(){return!1}},i.inherits(e,n),e}),n("ig/Text",["require","./util","./DisplayObject"],function(t){function e(t){this.p={},i.extend(!0,this.p,{content:"",size:30,isBold:!1,fontFamily:"sans-serif"},t);var e=this.p,r=n(e.content,e.isBold,e.fontFamily,e.size);return this.bounds={x:e.x,y:e.y,width:r.width,height:r.height},this.font=""+(e.isBold?"bold ":"")+e.size+"pt "+e.fontFamily,a.call(this,this.p),this}function n(t,e,n,i){var a=document.createElement("div");a.innerHTML=t,a.style.position="absolute",a.style.top="-1000px",a.style.left="-1000px",a.style.fontFamily=n,a.style.fontWeight=e?"bold":"normal",a.style.fontSize=i+"pt",document.body.appendChild(a);var r={width:a.offsetWidth,height:a.offsetHeight};return document.body.removeChild(a),r}var i=t("./util"),a=t("./DisplayObject");return e.prototype={constructor:e,changeContent:function(t){this.p.content=t;var e=n(this.p.content,this.p.isBold,this.p.fontFamily,this.p.size);return this.bounds={x:this.p.x,y:this.p.y,width:e.width,height:e.height},this},getContent:function(){return this.p.content},render:function(t){t.save(),t.fillStyle=this.p.fillStyle,t.globalAlpha=this.p.alpha,t.font=this.font,this.matrix.reset(),this.matrix.translate(this.p.x,this.p.y),this.matrix.rotate(this.p.angle),this.matrix.scale(this.p.scaleX,this.p.scaleY);var e=this.matrix.m;return t.transform(e[0],e[1],e[2],e[3],e[4],e[5]),t.fillText(this.p.content,.5*-this.bounds.width,.5*-this.bounds.height),this.debugRender(t),t.restore(),this},debugRender:function(t){if(this.p.debug){t.save();var e=this.matrix.reset().m;this.matrix.translate(-this.bounds.x-.5*this.bounds.width,-this.bounds.y-this.bounds.height-10),t.transform(e[0],e[1],e[2],e[3],e[4],e[5]),t.strokeStyle="black",t.strokeRect(this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height),t.restore()}}},i.inherits(e,a),e}),n("ig/Event",["require"],function(){function t(){this._events={}}var e="_observerGUID";return t.prototype={constructor:t,on:function(t,n){this._events||(this._events={});var i=this._events[t];return i||(i=this._events[t]=[]),n.hasOwnProperty(e)||(n[e]=+new Date),i.push(n),this},un:function(t,e){if(this._events){if(!e)return void(this._events[t]=[]);var n=this._events[t];if(n)for(var i=0;i<n.length;i++)n[i]===e&&(n.splice(i,1),i--);return this}},fire:function(t,n){1===arguments.length&&"object"==typeof t&&(n=t,t=n.type);var i=this["on"+t];if("function"==typeof i&&i.call(this,n),this._events){null==n&&(n={}),"[object Object]"!==Object.prototype.toString.call(n)&&(n={data:n}),n.type=t,n.target=this;var a={},r=this._events[t];if(r){r=r.slice();for(var s=0;s<r.length;s++){var o=r[s];a.hasOwnProperty(o[e])||o.call(this,n)}}if("*"!==t){var u=this._events["*"];if(!u)return;u=u.slice();for(var s=0;s<u.length;s++){var o=u[s];a.hasOwnProperty(o[e])||o.call(this,n)}}}},clearEvents:function(){this._events={}},enable:function(e){e._events={},e.on=t.prototype.on,e.un=t.prototype.un,e.fire=t.prototype.fire}},t}),n("ig/domEvt",["require","./util","./env"],function(t){function e(t){for(var e=0,n=s.length;n>e;e++)if(s[e].p.name===t)return!0;return!1}var n=t("./util"),i=t("./env"),a=["touchstart","touchmove","touchend"],r=["mousedown","mousemove","mouseup"],s=[],o={};return o.events=i.supportTouch?a:r,o.fireEvt={},o.fireEvt.touchstart=o.fireEvt.mousedown=function(t){console.warn("touchstart");for(var e=t.target,n=e.p.displayObjectList,i=0,a=n.length;a>i;i++){var r=n[i];r.p.mouseEnable&&r.hitTestPoint(t.data.x,t.data.y)&&(t.data.curStage=e,r.p.isCapture=!0,r.p.captureFunc.call(r,t.data))}return e},o.fireEvt.touchmove=o.fireEvt.mousemove=function(t){for(var n=t.target,i=n.p.displayObjectList,a=0,r=i.length;r>a;a++){var o=i[a];o.hitTestPoint(t.data.x,t.data.y)&&!e(o.p.name)&&s.push(o),t.data.holdSprites=s,o.p.mouseEnable&&o.p.isCapture&&(t.data.curStage=n,o.p.moveFunc.call(o,t.data))}return n},o.fireEvt.touchend=o.fireEvt.mouseup=function(t){for(var n=t.target,i=n.p.displayObjectList,a=0,r=i.length;r>a;a++){var o=i[a];(o.p.isCapture||e(o.p.name))&&(o.p.releaseFunc.call(o,t.data),o.p.isCapture=!1)
}return s=[],n},o.initMouse=function(t){this.stage=t,this.element=t.p.canvas,this.x=0,this.y=0,this.isDown=!1;var e=n.getElementOffset(this.element);return this.offsetX=e.x,this.offsetY=e.y,this.addEvent(),this},o.addEvent=function(){var t=this,e=t.element;t.events.forEach(function(n,i){e.addEventListener(n,function(e){e.preventDefault(),0===i?t.isDown=!0:2===i&&(t.isDown=!1);var a=e.changedTouches?e.changedTouches[0].pageX:e.pageX,r=e.changedTouches?e.changedTouches[0].pageY:e.pageY;t.x=a-t.offsetX,t.y=r-t.offsetY,t.stage.fire(n,{data:{x:t.x,y:t.y,isDown:t.isDown}})})})},o}),n("ig/Matrix",["require","./util"],function(t){function e(){return this.m=[1,0,0,1,0,0],this}var n=t("./util"),i=Math.cos,a=Math.sin;return e.prototype={constructor:e,reset:function(){return this.m=[1,0,0,1,0,0],this},mul:function(t){var e=this.m[0]*t.m[0]+this.m[2]*t.m[1],n=this.m[1]*t.m[0]+this.m[3]*t.m[1],i=this.m[0]*t.m[2]+this.m[2]*t.m[3],a=this.m[1]*t.m[2]+this.m[3]*t.m[3],r=this.m[0]*t.m[4]+this.m[2]*t.m[5]+this.m[4],s=this.m[1]*t.m[4]+this.m[3]*t.m[5]+this.m[5];return this.m[0]=e,this.m[1]=n,this.m[2]=i,this.m[3]=a,this.m[4]=r,this.m[5]=s,this},invert:function(){var t=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),e=this.m[3]*t,n=-this.m[1]*t,i=-this.m[2]*t,a=this.m[0]*t,r=t*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),s=t*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=e,this.m[1]=n,this.m[2]=i,this.m[3]=a,this.m[4]=r,this.m[5]=s,this},rotate:function(t){var e=n.deg2Rad(t),r=i(e),s=a(e),o=this.m[0]*r+this.m[2]*s,u=this.m[1]*r+this.m[3]*s,h=this.m[0]*-s+this.m[2]*r,c=this.m[1]*-s+this.m[3]*r;return this.m[0]=o,this.m[1]=u,this.m[2]=h,this.m[3]=c,this},translate:function(t,e){return this.m[4]+=this.m[0]*t+this.m[2]*e,this.m[5]+=this.m[1]*t+this.m[3]*e,this},scale:function(t,e){this.m[0]*=t,this.m[1]*=t,this.m[2]*=e,this.m[3]*=e},transformPoint:function(t,e){var n=t,i=e;return t=n*this.m[0]+i*this.m[2]+this.m[4],e=n*this.m[1]+i*this.m[3]+this.m[5],{x:t,y:e}}},e}),n("ig/Vector",["require"],function(){function t(t,e){this.x=t||0,this.y=e||t||0}var e=Math.sqrt,n=Math.pow;return t.prototype={constructor:t,normalize:function(){var t=this.getMagnitude();return 0!==t&&(this.x/=t,this.y/=t),this},getMagnitude:function(){return e(n(this.x,2)+n(this.y,2))},add:function(e,n){var i=this.x+e.x,a=this.y+e.y;return n?new t(i,a):(this.x=i,this.y=a,this)},sub:function(e,n){var i=this.x-e.x,a=this.y-e.y;return n?new t(i,a):(this.x=i,this.y=a,this)},dot:function(t){return this.x*t.x+this.y*t.y},edge:function(t){return this.sub(t,!0)},perpendicular:function(e){var n=-this.x,i=this.y;return e?new t(n,i):(this.x=n,this.y=i,this)},normal:function(){return this.perpendicular(!0).normalize()}},t}),n("ig/Polygon",["require","./util","./Vector","./Projection","./DisplayObject"],function(t){function e(t){return this.p={},n.extend(!0,this.p,{points:[]},t),this.p.points.length&&(this.p.x=this.p.points[0].x,this.p.y=this.p.points[0].y),this.getBounds(),this.p.cX=this.p.x+this.bounds.width/2,this.p.cY=this.p.y+this.bounds.height/2,this.p.cX>=this.bounds.x+this.bounds.width&&(this.p.cX=this.bounds.x+this.bounds.width),this.p.cY>=this.bounds.y+this.bounds.height&&(this.p.cY=this.bounds.y+this.bounds.height),this.originalPoints=n.extend(!0,[],this.p.points),r.call(this,this.p),this}var n=t("./util"),i=t("./Vector"),a=t("./Projection"),r=t("./DisplayObject");return e.prototype={constructor:e,createPath:function(t){var e=this.p,n=e.points,i=n.length;if(i){t.beginPath(),t.moveTo(n[0].x,n[0].y);for(var a=0;i>a;a++)t.lineTo(n[a].x,n[a].y);return t.closePath(),this}},move:function(t,e){for(var n=this.p.points,i=n.length,a=0;i>a;a++){var r=(n[a],this.originalPoints[a]);r.x+=t,r.y+=e}return this.getBounds(),this.p.cX=this.p.x+this.bounds.width/2,this.p.cY=this.p.y+this.bounds.height/2,this},getAxes:function(){for(var t=new i,e=new i,n=[],a=this.p.points,r=0,s=a.length-1;s>r;r++)t.x=a[r].x,t.y=a[r].y,e.x=a[r+1].x,e.y=a[r+1].y,n.push(t.edge(e).normal());return n},project:function(t){for(var e=[],n=new i,r=this.p.points,s=0,o=r.length;o>s;s++){var u=r[s];n.x=u.x,n.y=u.y,e.push(n.dot(t))}return new a(Math.min.apply(Math,e),Math.max.apply(Math,e))},collidesWith:function(t){var e=this.getAxes().concat(t.getAxes());return!this.separationOnAxes(e,t)},separationOnAxes:function(t,e){for(var n=0,i=t.length;i>n;n++){var a=t[n],r=e.project(a),s=this.project(a);if(!r.overlaps(s))return!0}return!1},isPointInPath:function(t,e,n){return this.createPath(t),t.isPointInPath(e,n)},hitTestPoint:function(t,e){var n=this.stageOwner;return this.isPointInPath(n.p.offCtx,t,e)},getBounds:function(){for(var t=this.p.points,e=Number.MAX_VALUE,n=Number.MIN_VALUE,i=Number.MAX_VALUE,a=Number.MIN_VALUE,r=0,s=t.length;s>r;r++)t[r].x<e&&(e=t[r].x),t[r].x>n&&(n=t[r].x),t[r].y<i&&(i=t[r].y),t[r].y>a&&(a=t[r].y);return this.bounds={x:e,y:i,width:n-e,height:a-i},this},render:function(t){t.save(),t.fillStyle=this.p.fillStyle,t.strokeStyle=this.p.strokeStyle,t.globalAlpha=this.p.alpha,this.matrix.reset(),this.matrix.translate(this.p.cX,this.p.cY),this.matrix.rotate(this.p.angle),this.matrix.scale(this.p.scaleX,this.p.scaleY),this.matrix.translate(-this.p.cX,-this.p.cY);for(var e=0,n=this.p.points.length;n>e;e++)this.p.points[e]={x:this.matrix.transformPoint(this.originalPoints[e].x,this.originalPoints[e].y).x,y:this.matrix.transformPoint(this.originalPoints[e].x,this.originalPoints[e].y).y};return this.createPath(t),t.fill(),t.stroke(),this.getBounds(),this.debugRender(t),t.restore(),this},debugRender:function(t){this.p.debug&&(t.save(),t.strokeStyle="black",t.strokeRect(this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height),t.restore())}},n.inherits(e,r),e}),n("ig/Projection",["require"],function(){function t(t,e){this.min=t,this.max=e}return t.prototype={constructor:t,overlaps:function(t){return this.max>t.min&&this.min<t.max}},t}),n("ig/resourceLoader",["require","./ig","./util"],function(t){function e(t){var e=t.split(".");return e[e.length-1].toLowerCase()}var n=t("./ig"),i=t("./util"),a={png:"Image",jpg:"Image",gif:"Image",jpeg:"Image",ogg:"Audio",wav:"Audio",m4a:"Audio",mp3:"Audio"},r={};return n.resources=r.resources={},n.loadOther=r.loadOther=function(){var t,n,a,r,s=arguments.length;switch(s){case 1:t=n=arguments[0],a=r=i.noop;break;case 2:t=n=arguments[0],a=r=arguments[1];break;case 3:t=n=arguments[0],a=arguments[1],r=arguments[2];break;default:t=arguments[0],n=arguments[1],a=arguments[2],r=arguments[3]}var o=e(n),u=new XMLHttpRequest;u.onreadystatechange=function(){4===u.readyState&&(200===u.status?"json"===o?a(t,JSON.parse(u.responseText)):a(t,u.responseText):r(n))},u.open("GET",n,!0),u.send(null)},n.loadImage=r.loadImage=function(){var t,e,n,a,r=arguments.length;switch(r){case 1:t=e=arguments[0],n=a=i.noop;break;case 2:t=e=arguments[0],n=a=arguments[1];break;case 3:t=e=arguments[0],n=arguments[1],a=arguments[2];break;default:t=arguments[0],e=arguments[1],n=arguments[2],a=arguments[3]}var s=new Image;s.addEventListener("load",function(){n(t,s)}),s.addEventListener("error",function(){a(e)}),s.src=e},n.loadResource=r.loadResource=function(t,r,s){var o=this;s=s||{},Array.isArray(t)||(t=[t]);for(var u=!1,h=function(t){u=!0,(s.errorCallback||function(t){throw"Loading Error: "+t}).call(o,t)},c=s.processCallback||i.noop,p=t.length,l=p,m=function(t,e){u||(n.resources[t]||(n.resources[t]=e),l--,c(p-l,p),0===l&&r&&r.call(o,n.resources))},f=s.customResourceTypes||{},d=i.extend({},a,f),g=0;p>g;g++){var v,y,w=t[g];if("object"===i.getType(w)?(v=w.id,y=w.src):v=y=w,n.resources.hasOwnProperty(v))m(v,n.resources[v]);else{var b=o["load"+d[e(y)]];b||(b=o.loadOther),b(v,y,m,h)}}},r});var i,a=e("ig"),r="ig/util",s="util",o="";o?a[o]?a[o][s]=e(r):(i={},i[s]=e(r),a[o]=i):(i=e(r),s&&(a[s]=i));var i,r="ig/easing",s="easing",o="";o?a[o]?a[o][s]=e(r):(i={},i[s]=e(r),a[o]=i):(i=e(r),s&&(a[s]=i));var i,r="ig/env",s="env",o="";o?a[o]?a[o][s]=e(r):(i={},i[s]=e(r),a[o]=i):(i=e(r),s&&(a[s]=i));var i,r="ig/Animation",s="Animation",o="";o?a[o]?a[o][s]=e(r):(i={},i[s]=e(r),a[o]=i):(i=e(r),s&&(a[s]=i));var i,r="ig/Game",s="Game",o="";o?a[o]?a[o][s]=e(r):(i={},i[s]=e(r),a[o]=i):(i=e(r),s&&(a[s]=i));var i,r="ig/Stage",s="Stage",o="";o?a[o]?a[o][s]=e(r):(i={},i[s]=e(r),a[o]=i):(i=e(r),s&&(a[s]=i));var i,r="ig/DisplayObject",s="DisplayObject",o="";o?a[o]?a[o][s]=e(r):(i={},i[s]=e(r),a[o]=i):(i=e(r),s&&(a[s]=i));var i,r="ig/Text",s="Text",o="";o?a[o]?a[o][s]=e(r):(i={},i[s]=e(r),a[o]=i):(i=e(r),s&&(a[s]=i));var i,r="ig/Event",s="",o="";o?a[o]?a[o][s]=e(r):(i={},i[s]=e(r),a[o]=i):(i=e(r),s&&(a[s]=i));var i,r="ig/domEvt",s="",o="";o?a[o]?a[o][s]=e(r):(i={},i[s]=e(r),a[o]=i):(i=e(r),s&&(a[s]=i));var i,r="ig/Matrix",s="Matrix",o="";o?a[o]?a[o][s]=e(r):(i={},i[s]=e(r),a[o]=i):(i=e(r),s&&(a[s]=i));var i,r="ig/Vector",s="Vector",o="";o?a[o]?a[o][s]=e(r):(i={},i[s]=e(r),a[o]=i):(i=e(r),s&&(a[s]=i));var i,r="ig/Polygon",s="Polygon",o="";o?a[o]?a[o][s]=e(r):(i={},i[s]=e(r),a[o]=i):(i=e(r),s&&(a[s]=i));var i,r="ig/Projection",s="",o="";o?a[o]?a[o][s]=e(r):(i={},i[s]=e(r),a[o]=i):(i=e(r),s&&(a[s]=i));var i,r="ig/resourceLoader",s="",o="";o?a[o]?a[o][s]=e(r):(i={},i[s]=e(r),a[o]=i):(i=e(r),s&&(a[s]=i)),t.ig=a}(window);