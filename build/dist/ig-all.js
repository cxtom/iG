!function(e){var t,r;!function(){function e(e,t){if(!t)return e;if(0===e.indexOf(".")){var r=t.split("/"),i=e.split("/"),a=r.length-1,n=i.length,o=0,s=0;e:for(var c=0;n>c;c++)switch(i[c]){case"..":if(!(a>o))break e;o++,s++;break;case".":s++;break;default:break e}return r.length=a-o,i=i.slice(s),r.concat(i).join("/")}return e}function i(t){function r(r,o){if("string"==typeof r){var s=i[r];return s||(s=n(e(r,t)),i[r]=s),s}r instanceof Array&&(o=o||function(){},o.apply(this,a(r,o,t)))}var i={};return r}function a(r,i,a){for(var s=[],c=o[a],u=0,m=Math.min(r.length,i.length);m>u;u++){var d,h=e(r[u],a);switch(h){case"require":d=c&&c.require||t;break;case"exports":d=c.exports;break;case"module":d=c;break;default:d=n(h)}s.push(d)}return s}function n(e){var t=o[e];if(!t)throw new Error("No "+e);if(!t.defined){var r=t.factory,i=r.apply(this,a(t.deps||[],r,e));"undefined"!=typeof i&&(t.exports=i),t.defined=1}return t.exports}var o={};r=function(e,t,r){o[e]={id:e,deps:t,factory:r,defined:0,exports:{},require:i(e)}},t=i("")}(),r("ig",["ig/ig"],function(e){return e}),r("ig/ig",["require"],function(){window.requestAnimationFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(e){var t,r,i=this;setTimeout(function(){t=+new Date,e(t),r=+new Date,i.timeout=1e3/60-(r-t)},i.timeout)}}(),window.cancelAnimationFrame=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelAnimationFrame||window.mozCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.msCancelRequestAnimationFrame||window.oCancelAnimationFrame||window.oCancelRequestAnimationFrame||window.clearTimeout}();var e={};return e}),r("ig/util",["require"],function(){var e={};return e.noop=function(){},e.inherits=function(e,t){var r=function(){};r.prototype=t.prototype;var i=e.prototype,a=e.prototype=new r;for(var n in i)a[n]=i[n];return e.prototype.constructor=e,e},e.deg2Rad=function(e){return e*Math.PI/180},e.rad2Deg=function(e){return 180*e/Math.PI},e.window2Canvas=function(e,t,r){var i=e.getBoundingClientRect();return{x:Math.round(t-i.left*(e.width/i.width)),y:Math.round(r-i.top*(e.height/i.height))}},e.fastApply=function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2]);case 4:return e.call(t,r[0],r[1],r[2],r[3]);case 5:return e.call(t,r[0],r[1],r[2],r[3],r[4]);case 6:return e.call(t,r[0],r[1],r[2],r[3],r[4],r[5]);case 7:return e.call(t,r[0],r[1],r[2],r[3],r[4],r[5],r[6]);case 8:return e.call(t,r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7]);case 9:return e.call(t,r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8]);default:return e.apply(t,r)}},e}),r("ig/Event",["require"],function(){function e(){this._events={}}var t="_observerGUID";return e.prototype.on=function(e,r){this._events||(this._events={});var i=this._events[e];i||(i=this._events[e]=[]),r.hasOwnProperty(t)||(r[t]=+new Date),i.push(r)},e.prototype.un=function(e,t){if(this._events){if(!t)return void(this._events[e]=[]);var r=this._events[e];if(r)for(var i=0;i<r.length;i++)r[i]===t&&(r.splice(i,1),i--)}},e.prototype.fire=function(e,r){1===arguments.length&&"object"==typeof e&&(r=e,e=r.type);var i=this["on"+e];if("function"==typeof i&&i.call(this,r),this._events){null==r&&(r={}),"[object Object]"!==Object.prototype.toString.call(r)&&(r={data:r}),r.type=e,r.target=this;var a={},n=this._events[e];if(n){n=n.slice();for(var o=0;o<n.length;o++){var s=n[o];a.hasOwnProperty(s[t])||s.call(this,r)}}if("*"!==e){var c=this._events["*"];if(!c)return;c=c.slice();for(var o=0;o<c.length;o++){var s=c[o];a.hasOwnProperty(s[t])||s.call(this,r)}}}},e.enable=function(t){t._events={},t.on=e.prototype.on,t.un=e.prototype.un,t.fire=e.prototype.fire},e}),r("ig/platform",["require"],function(){function e(e){var t={},r={},i=e.match(/Web[kK]it[\/]{0,1}([\d.]+)/),a=e.match(/(Android);?[\s\/]+([\d.]+)?/),n=!!e.match(/\(Macintosh\; Intel /),o=e.match(/(iPad).*OS\s([\d_]+)/),s=e.match(/(iPod)(.*OS\s([\d_]+))?/),c=!o&&e.match(/(iPhone\sOS)\s([\d_]+)/),u=e.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),m=e.match(/Windows Phone ([\d.]+)/),d=u&&e.match(/TouchPad/),h=e.match(/Kindle\/([\d.]+)/),l=e.match(/Silk\/([\d._]+)/),p=e.match(/(BlackBerry).*Version\/([\d.]+)/),f=e.match(/(BB10).*Version\/([\d.]+)/),v=e.match(/(RIM\sTablet\sOS)\s([\d.]+)/),w=e.match(/PlayBook/),g=e.match(/Chrome\/([\d.]+)/)||e.match(/CriOS\/([\d.]+)/),y=e.match(/Firefox\/([\d.]+)/),b=e.match(/MSIE\s([\d.]+)/)||e.match(/Trident\/[\d](?=[^\?]+).*rv:([0-9.].)/),F=!g&&e.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/),x=F||e.match(/Version\/([\d.]+)([^S](Safari)|[^M]*(Mobile)[^S]*(Safari))/),M=e.match(/MicroMessenger\/([\d.]+)/),P=e.match(/baiduboxapp\/[^\/]+\/([\d.]+)_/)||e.match(/baiduboxapp\/([\d.]+)/)||e.match(/BaiduHD\/([\d.]+)/)||e.match(/FlyFlow\/([\d.]+)/)||e.match(/baidubrowser\/([\d.]+)/),S=e.match(/MQQBrowser\/([\d.]+)/)||e.match(/QQ\/([\d.]+)/),A=e.match(/UCBrowser\/([\d.]+)/),q=e.match(/SogouMobileBrowser\/([\d.]+)/),k=a&&e.match(/MiuiBrowser\/([\d.]+)/),C=e.match(/LBKIT/),I=e.match(/Mercury\/([\d.]+)/);return(r.webkit=!!i)&&(r.version=i[1]),a&&(t.android=!0,t.version=a[2]),c&&!s&&(t.ios=t.iphone=!0,t.version=c[2].replace(/_/g,".")),o&&(t.ios=t.ipad=!0,t.version=o[2].replace(/_/g,".")),s&&(t.ios=t.ipod=!0,t.version=s[3]?s[3].replace(/_/g,"."):null),m&&(t.wp=!0,t.version=m[1]),u&&(t.webos=!0,t.version=u[2]),d&&(t.touchpad=!0),p&&(t.blackberry=!0,t.version=p[2]),f&&(t.bb10=!0,t.version=f[2]),v&&(t.rimtabletos=!0,t.version=v[2]),w&&(r.playbook=!0),h&&(t.kindle=!0,t.version=h[1]),l&&(r.silk=!0,r.version=l[1]),!l&&t.android&&e.match(/Kindle Fire/)&&(r.silk=!0),g&&(r.chrome=!0,r.version=g[1]),y&&(r.firefox=!0,r.version=y[1]),b&&(r.ie=!0,r.version=b[1]),x&&(n||t.ios)&&(r.safari=!0,n&&(r.version=x[1])),F&&(r.webview=!0),M&&(r.wechat=!0,r.version=M[1]),P&&(delete r.webview,r.baidu=!0,r.version=P[1]),S&&(r.qq=!0,r.version=S[1]),A&&(delete r.webview,r.uc=!0,r.version=A[1]),q&&(delete r.webview,r.sogou=!0,r.version=q[1]),k&&(r.xiaomi=!0,r.version=k[1]),C&&(r.liebao=!0,r.version="0"),I&&(r.mercury=!0,r.version=I[1]),navigator.standalone&&(r.standalone=!0),t.tablet=!!(o||w||a&&!e.match(/Mobile/)||y&&e.match(/Tablet/)||b&&!e.match(/Phone/)&&e.match(/Touch/)),t.phone=!(t.tablet||t.ipod||!(a||c||u||p||f||g&&e.match(/Android/)||g&&e.match(/CriOS\/([\d.]+)/)||y&&e.match(/Mobile/)||b&&e.match(/Touch/))),{browser:r,os:t}}var t=e(navigator.userAgent),r={browser:t.browser,os:t.os,supportOrientation:"number"==typeof window.orientation&&"object"==typeof window.onorientationchange,supportTouch:"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,supportGeolocation:null!=navigator.geolocation};return r}),r("ig/BaseSprite",["require","./util","./Event"],function(e){function t(e){var t=this;e.save(),e.beginPath(),e.lineWidth=1,e.strokeStyle="#fff",e.globalAlpha=.8,e.rect(t.x,t.y,t.width,t.height),e.closePath(),e.stroke(),e.restore()}function r(e){e=e||{};var t=this;t.x=e.x||0,t.y=e.y||0,t.width=e.width||20,t.height=e.height||20,t.vX=e.vX||0,t.vY=e.vY||0,t.aX=e.aX||0,t.aY=e.aY||0,t.reverseX=!1,t.reverseY=!1,t.alpha=e.alpha||1,t.scale=e.scale||1,t.angle=e.angle||0,t.radius=30*Math.random(),t.status=1,t.customProp={},t.debug=!1}return r.prototype.isHit=function(e){var t=this,r=t.x>e.x?t.x:e.x,i=t.x+t.width<e.x+e.width?t.x+t.width:e.x+e.width,a=t.y>e.y?t.y:e.y,n=t.y+t.width<e.y+e.width?t.y+t.width:e.y+e.width;return i>=r&&n>=a},r.prototype.draw=function(e){var r=this;e.save(),e.globalAlpha=r.alpha,e.rotate(r.rotation*Math.PI/180),e.translate(r.x*r.scale,r.y*r.scale),r.fire("BaseSprite:draw",r),r.debug&&t.call(r,e),e.restore()},e("./util").inherits(r,e("./Event")),r}),r("ig/ImageLoader",["require","./util","./Event"],function(e){function t(){this.images={},this.imageUrls=[],this.imagesLoadedCount=0,this.imagesErrorLoadedCount=0,this.imageIndex=0,this.imageLoadingProgressCallback=i.noop,this.imageLoadedCallback=i.noop,this.imageLoadedErrorCallback=i.noop}var r=Array.prototype;return t.prototype.loadImage=function(e){var t=this,r=new Image;r.src=e,r.addEventListener("load",function(e){t.imagesLoadedCount++,"function"==typeof t.imageLoadedCallback&&t.imageLoadedCallback.call(t,e)}),r.addEventListener("error",function(e){t.imagesErrorLoadedCount++,"function"==typeof t.imageLoadedErrorCallback&&t.imageLoadedErrorCallback.call(t,e)}),t.images[e]=r},t.prototype.loadImages=function(){var e=this,t=e.imageUrls.length;return e.imageIndex<t&&(e.loadImage(e.imageUrls[e.imageIndex]),e.imageIndex++),(e.imagesLoadedCount+e.imagesErrorLoadedCount)/t*100},t.prototype.addImage=function(e){var t=this;r.push[Array.isArray(e)?"apply":"call"](t.imageUrls,e)},e("./util").inherits(t,e("./Event")),t}),r("ig/Game",["require","./Event","./util","./FrameMonitor"],function(e){function t(){r.apply(this,arguments),this.paused=!1,this.curGameFrameMonitor=new a}var r=e("./Event"),i=e("./util"),a=e("./FrameMonitor");return t.prototype={constructor:t,render:function(){var e=this;e.curGameFrameMonitor.update(),e.paused||(e.requestID=window.requestAnimationFrame(function(){e.render.call(e)})),e.fire("Game:beforeRender",{data:{curFrame:e.curGameFrameMonitor.cur,maxFrame:e.curGameFrameMonitor.max,minFrame:e.curGameFrameMonitor.min}}),e.fire("Game:afterRender",{data:{curFrame:e.curGameFrameMonitor.cur,maxFrame:e.curGameFrameMonitor.max,minFrame:e.curGameFrameMonitor.min}})},start:function(){var e=this;e.paused=!1,e.curGameFrameMonitor.reset(),e.requestID=window.requestAnimationFrame(function(){e.curGameFrameMonitor.start(),e.render.call(e)})},pause:function(){this.paused=!0},play:function(){var e=this;e.paused=!1,e.requestID=window.requestAnimationFrame(function(){e.render.call(e)})},stop:function(){window.cancelAnimationFrame(this.requestID)},setStageManager:function(e){this.stageManager=e}},i.inherits(t,r),t}),r("ig/FrameMonitor",["require"],function(){function e(){this.max=0,this.min=9999,this.cur=0,this.curTime=0,this.expendPerFrame=0,this.startTimePerSecond=0,this.totalPerSecond=0}return e.prototype={constructor:e,reset:function(){var e=this;e.max=0,e.min=9999,e.cur=0,e.curTime=0,e.expendPerFrame=0,e.startTimePerSecond=0,e.totalPerSecond=0},start:function(){this.curTime=this.startTimePerSecond=new Date},update:function(){var e=new Date;e-this.startTimePerSecond>=1e3?(this.cur=this.totalPerSecond,this.max=this.cur>this.max?this.cur:this.max,this.min=this.cur<this.min?this.cur:this.min,this.totalPerSecond=0,this.startTimePerSecond=e):++this.totalPerSecond,this.expendPerFrame=e-this.curTime,this.curTime=e}},e});var i=t("ig");i.util=t("ig/util"),i.Event=t("ig/Event"),i.env=t("ig/platform"),i.BaseSprite=t("ig/BaseSprite"),i.ImageLoader=t("ig/ImageLoader"),i.Game=t("ig/Game"),i.FrameMonitor=t("ig/FrameMonitor"),e.ig=i}(window);