!function(e){var t,i;!function(){function e(e,t){if(!t)return e;if(0===e.indexOf(".")){var i=t.split("/"),a=e.split("/"),n=i.length-1,r=a.length,o=0,s=0;e:for(var c=0;r>c;c++)switch(a[c]){case"..":if(!(n>o))break e;o++,s++;break;case".":s++;break;default:break e}return i.length=n-o,a=a.slice(s),i.concat(a).join("/")}return e}function a(t){function i(i,o){if("string"==typeof i){var s=a[i];return s||(s=r(e(i,t)),a[i]=s),s}i instanceof Array&&(o=o||function(){},o.apply(this,n(i,o,t)))}var a={};return i}function n(i,a,n){for(var s=[],c=o[n],u=0,l=Math.min(i.length,a.length);l>u;u++){var h,d=e(i[u],n);switch(d){case"require":h=c&&c.require||t;break;case"exports":h=c.exports;break;case"module":h=c;break;default:h=r(d)}s.push(h)}return s}function r(e){var t=o[e];if(!t)throw new Error("No "+e);if(!t.defined){var i=t.factory,a=i.apply(this,n(t.deps||[],i,e));"undefined"!=typeof a&&(t.exports=a),t.defined=1}return t.exports}var o={};i=function(e,t,i){o[e]={id:e,deps:t,factory:i,defined:0,exports:{},require:a(e)}},t=a("")}(),i("ig",["ig/ig"],function(e){return e}),i("ig/ig",["require"],function(){window.requestAnimationFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(e){var t,i,a=this;setTimeout(function(){t=+new Date,e(t),i=+new Date,a.timeout=1e3/60-(i-t)},a.timeout)}}(),window.cancelAnimationFrame=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelAnimationFrame||window.mozCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.msCancelRequestAnimationFrame||window.oCancelAnimationFrame||window.oCancelRequestAnimationFrame||window.clearTimeout}();var e={};return e}),i("ig/util",["require"],function(){var e={};return e.noop=function(){},e.inherits=function(e,t){var i=function(){};i.prototype=t.prototype;var a=e.prototype,n=e.prototype=new i;for(var r in a)n[r]=a[r];return e.prototype.constructor=e,e.superClass=t.prototype,e},e.deg2Rad=function(e){return e*Math.PI/180},e.rad2Deg=function(e){return 180*e/Math.PI},e.window2Canvas=function(e,t,i){var a=e.getBoundingClientRect();return{x:Math.round(t-a.left*(e.width/a.width)),y:Math.round(i-a.top*(e.height/a.height))}},e.fastApply=function(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2]);case 4:return e.call(t,i[0],i[1],i[2],i[3]);case 5:return e.call(t,i[0],i[1],i[2],i[3],i[4]);case 6:return e.call(t,i[0],i[1],i[2],i[3],i[4],i[5]);case 7:return e.call(t,i[0],i[1],i[2],i[3],i[4],i[5],i[6]);case 8:return e.call(t,i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7]);case 9:return e.call(t,i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],i[8]);default:return e.apply(t,i)}},e.removeArrByCondition=function(e,t){for(var i,a=-1,n=0,r=e.length;r>n;n++)if(i=e[n],t(i)){a=n;break}-1!==a&&e.splice(e,1)},e.parseColor=function(e,t){return t===!0?"number"==typeof e?0|e:("string"==typeof e&&"#"===e[0]&&(e=e.slice(1)),parseInt(e,16)):("number"==typeof e&&(e="#"+("00000"+(0|e).toString(16)).substr(-6)),e)},e.colorToRGB=function(e,t){"string"==typeof e&&"#"===e[0]&&(e=window.parseInt(e.slice(1),16)),t=void 0===t?1:t;var i=e>>16&255,a=e>>8&255,n=255&e,r=0>t?0:t>1?1:t;return 1===r?"rgb("+i+","+a+","+n+")":"rgba("+i+","+a+","+n+","+r+")"},e.randomInt=function(e,t){return Math.floor(Math.random()*t+e)},e.randomFloat=function(e,t){return Math.random()*(t-e)+e},e.domWrap=function(e,t){var i=e.cloneNode(!0);if("string"==typeof t){var a=document.createElement("div");a.innerHTML=t,a=a.children[0],a.appendChild(i),e.parentNode.replaceChild(a,e)}else t.appendChild(i),e.parentNode.replaceChild(t,e);return i},e}),i("ig/Event",["require"],function(){function e(){this._events={}}var t="_observerGUID";return e.prototype={constructor:e,on:function(e,i){this._events||(this._events={});var a=this._events[e];a||(a=this._events[e]=[]),i.hasOwnProperty(t)||(i[t]=+new Date),a.push(i)},un:function(e,t){if(this._events){if(!t)return void(this._events[e]=[]);var i=this._events[e];if(i)for(var a=0;a<i.length;a++)i[a]===t&&(i.splice(a,1),a--)}},fire:function(e,i){1===arguments.length&&"object"==typeof e&&(i=e,e=i.type);var a=this["on"+e];if("function"==typeof a&&a.call(this,i),this._events){null==i&&(i={}),"[object Object]"!==Object.prototype.toString.call(i)&&(i={data:i}),i.type=e,i.target=this;var n={},r=this._events[e];if(r){r=r.slice();for(var o=0;o<r.length;o++){var s=r[o];n.hasOwnProperty(s[t])||s.call(this,i)}}if("*"!==e){var c=this._events["*"];if(!c)return;c=c.slice();for(var o=0;o<c.length;o++){var s=c[o];n.hasOwnProperty(s[t])||s.call(this,i)}}}},enable:function(t){t._events={},t.on=e.prototype.on,t.un=e.prototype.un,t.fire=e.prototype.fire}},e}),i("ig/platform",["require"],function(){function e(e){var t={},i={},a=e.match(/Web[kK]it[\/]{0,1}([\d.]+)/),n=e.match(/(Android);?[\s\/]+([\d.]+)?/),r=!!e.match(/\(Macintosh\; Intel /),o=e.match(/(iPad).*OS\s([\d_]+)/),s=e.match(/(iPod)(.*OS\s([\d_]+))?/),c=!o&&e.match(/(iPhone\sOS)\s([\d_]+)/),u=e.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),l=e.match(/Windows Phone ([\d.]+)/),h=u&&e.match(/TouchPad/),d=e.match(/Kindle\/([\d.]+)/),m=e.match(/Silk\/([\d._]+)/),p=e.match(/(BlackBerry).*Version\/([\d.]+)/),g=e.match(/(BB10).*Version\/([\d.]+)/),f=e.match(/(RIM\sTablet\sOS)\s([\d.]+)/),v=e.match(/PlayBook/),y=e.match(/Chrome\/([\d.]+)/)||e.match(/CriOS\/([\d.]+)/),w=e.match(/Firefox\/([\d.]+)/),b=e.match(/MSIE\s([\d.]+)/)||e.match(/Trident\/[\d](?=[^\?]+).*rv:([0-9.].)/),S=!y&&e.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/),x=S||e.match(/Version\/([\d.]+)([^S](Safari)|[^M]*(Mobile)[^S]*(Safari))/),O=e.match(/MicroMessenger\/([\d.]+)/),C=e.match(/baiduboxapp\/[^\/]+\/([\d.]+)_/)||e.match(/baiduboxapp\/([\d.]+)/)||e.match(/BaiduHD\/([\d.]+)/)||e.match(/FlyFlow\/([\d.]+)/)||e.match(/baidubrowser\/([\d.]+)/),k=e.match(/MQQBrowser\/([\d.]+)/)||e.match(/QQ\/([\d.]+)/),F=e.match(/UCBrowser\/([\d.]+)/),j=e.match(/SogouMobileBrowser\/([\d.]+)/),I=n&&e.match(/MiuiBrowser\/([\d.]+)/),M=e.match(/LBKIT/),P=e.match(/Mercury\/([\d.]+)/);return(i.webkit=!!a)&&(i.version=a[1]),n&&(t.android=!0,t.version=n[2]),c&&!s&&(t.ios=t.iphone=!0,t.version=c[2].replace(/_/g,".")),o&&(t.ios=t.ipad=!0,t.version=o[2].replace(/_/g,".")),s&&(t.ios=t.ipod=!0,t.version=s[3]?s[3].replace(/_/g,"."):null),l&&(t.wp=!0,t.version=l[1]),u&&(t.webos=!0,t.version=u[2]),h&&(t.touchpad=!0),p&&(t.blackberry=!0,t.version=p[2]),g&&(t.bb10=!0,t.version=g[2]),f&&(t.rimtabletos=!0,t.version=f[2]),v&&(i.playbook=!0),d&&(t.kindle=!0,t.version=d[1]),m&&(i.silk=!0,i.version=m[1]),!m&&t.android&&e.match(/Kindle Fire/)&&(i.silk=!0),y&&(i.chrome=!0,i.version=y[1]),w&&(i.firefox=!0,i.version=w[1]),b&&(i.ie=!0,i.version=b[1]),x&&(r||t.ios)&&(i.safari=!0,r&&(i.version=x[1])),S&&(i.webview=!0),O&&(i.wechat=!0,i.version=O[1]),C&&(delete i.webview,i.baidu=!0,i.version=C[1]),k&&(i.qq=!0,i.version=k[1]),F&&(delete i.webview,i.uc=!0,i.version=F[1]),j&&(delete i.webview,i.sogou=!0,i.version=j[1]),I&&(i.xiaomi=!0,i.version=I[1]),M&&(i.liebao=!0,i.version="0"),P&&(i.mercury=!0,i.version=P[1]),navigator.standalone&&(i.standalone=!0),t.tablet=!!(o||v||n&&!e.match(/Mobile/)||w&&e.match(/Tablet/)||b&&!e.match(/Phone/)&&e.match(/Touch/)),t.phone=!(t.tablet||t.ipod||!(n||c||u||p||g||y&&e.match(/Android/)||y&&e.match(/CriOS\/([\d.]+)/)||w&&e.match(/Mobile/)||b&&e.match(/Touch/))),{browser:i,os:t}}var t=e(navigator.userAgent),i={browser:t.browser,os:t.os,supportOrientation:"number"==typeof window.orientation&&"object"==typeof window.onorientationchange,supportTouch:"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,supportGeolocation:null!=navigator.geolocation};return i}),i("ig/ImageLoader",["require","./util","./Event"],function(e){function t(){this.images={},this.imageUrls=[],this.imagesLoadedCount=0,this.imagesErrorLoadedCount=0,this.imageIndex=0,this.imageLoadingProgressCallback=a.noop,this.imageLoadedCallback=a.noop,this.imageLoadedErrorCallback=a.noop}var i=Array.prototype;return t.prototype.loadImage=function(e){var t=this,i=new Image;i.src=e,i.addEventListener("load",function(e){t.imagesLoadedCount++,"function"==typeof t.imageLoadedCallback&&t.imageLoadedCallback.call(t,e)}),i.addEventListener("error",function(e){t.imagesErrorLoadedCount++,"function"==typeof t.imageLoadedErrorCallback&&t.imageLoadedErrorCallback.call(t,e)}),t.images[e]=i},t.prototype.loadImages=function(){var e=this,t=e.imageUrls.length;return e.imageIndex<t&&(e.loadImage(e.imageUrls[e.imageIndex]),e.imageIndex++),(e.imagesLoadedCount+e.imagesErrorLoadedCount)/t*100},t.prototype.addImage=function(e){var t=this;i.push[Array.isArray(e)?"apply":"call"](t.imageUrls,e)},e("./util").inherits(t,e("./Event")),t}),i("ig/Game",["require","./Event","./util","./Stage","./FrameMonitor"],function(e){function t(){i.apply(this,arguments),this.paused=!1,this.curGameFrameMonitor=new r,this.stageStack=[],this.stages={}}var i=e("./Event"),a=e("./util"),n=e("./Stage"),r=e("./FrameMonitor");return t.prototype={constructor:t,render:function(){var e=this;e.curGameFrameMonitor.update(),e.paused||(e.requestID=window.requestAnimationFrame(function(){e.render.call(e)})),e.fire("Game:beforeRender",{data:{curFrame:e.curGameFrameMonitor.cur,maxFrame:e.curGameFrameMonitor.max,minFrame:e.curGameFrameMonitor.min}});var t=e.getCurrentStage();t&&(t.update(),t.render()),e.fire("Game:afterRender",{data:{curFrame:e.curGameFrameMonitor.cur,maxFrame:e.curGameFrameMonitor.max,minFrame:e.curGameFrameMonitor.min}})},start:function(){var e=this;e.paused=!1,e.curGameFrameMonitor.reset(),e.requestID=window.requestAnimationFrame(function(){e.curGameFrameMonitor.start(),e.render.call(e)})},pause:function(){this.paused=!0},resume:function(){var e=this;e.paused=!1,e.requestID=window.requestAnimationFrame(function(){e.render.call(e)})},stop:function(){window.cancelAnimationFrame(this.requestID)},getStageStack:function(){return this.stageStack},getStageByName:function(e){return this.stages[e]},createStage:function(e){var t=new n(e);return this.pushStage(t),t},pushStage:function(e){var t=this;t.getStageByName(e.name)||(t.stageStack.push(e),t.stages[e.name]=e,t.sortStageIndex())},popStage:function(){var e=this,t=e.stageStack.pop();t&&(t.clean(),delete e.stages[t.name],e.sortStageIndex())},sortStageIndex:function(){for(var e=this.stageStack,t=0,i=e.length;i>t;t++)e[t].container.style.zIndex=t},removeStageByName:function(e){var t=this,i=t.getStageByName(e);if(i){i.clean(),delete t.stages[i.name];var n=t.stageStack;a.removeArrByCondition(n,function(t){return t.name===e}),t.sortStageIndex()}},swapStage:function(e,t){var i=this,a=i.stageStack,n=a.length;if(e>=0&&n-1>=e&&t>=0&&n-1>=t){var r=a[e];a[e]=a[t],a[t]=r,i.sortStageIndex()}},getStageIndex:function(e){return e.container.style.zIndex},getCurrentStage:function(){var e=this;return e.stageStack[e.stageStack.length-1]},clearAllStage:function(){for(var e=this,t=0,i=e.stageStack.length;i>t;t++)e.stageStack[t].clean();e.stages={},e.stageStack=[]}},a.inherits(t,i),t}),i("ig/FrameMonitor",["require"],function(){function e(){this.max=0,this.min=9999,this.cur=0,this.curTime=0,this.expendPerFrame=0,this.startTimePerSecond=0,this.totalPerSecond=0}return e.prototype={constructor:e,reset:function(){var e=this;e.max=0,e.min=9999,e.cur=0,e.curTime=0,e.expendPerFrame=0,e.startTimePerSecond=0,e.totalPerSecond=0},start:function(){this.curTime=this.startTimePerSecond=new Date},update:function(){var e=new Date;e-this.startTimePerSecond>=1e3?(this.cur=this.totalPerSecond,this.max=this.cur>this.max?this.cur:this.max,this.min=this.cur<this.min?this.cur:this.min,this.totalPerSecond=0,this.startTimePerSecond=e):++this.totalPerSecond,this.expendPerFrame=e-this.curTime,this.curTime=e}},e}),i("ig/Stage",["require","./Event","./util","./DisplayObject"],function(e){function t(e){if(i.apply(this,arguments),e=e||{},!e.canvas)throw new Error("Stage must be require a canvas param");this.canvas=e.canvas,this.ctx=this.canvas.getContext("2d"),this.container=this.canvas.parentNode,this.name=null===e.name||void 0===e.name?"ig_stage_"+r++:e.name,this.x=e.x||0,this.y=e.y||0,this.width=e.width||this.canvas.width,this.height=e.height||this.canvas.height,this.containerBgColor=e.containerBgColor||"#000",this.setSize(),this.setContainerBgColor(),this.displayObjectList=[],this.displayObjects={}}var i=e("./Event"),a=e("./util"),n=e("./DisplayObject"),r=0;return t.prototype={constructor:t,clear:function(){var e=this;e.ctx.clearRect(0,0,e.width,e.height)},setSize:function(e,t){var i=this;i.width=e||i.width,i.height=t||i.height,i.container.style.width=i.width+"px",i.container.style.height=i.height+"px",i.canvas.width=i.width,i.canvas.height=i.height},setContainerBgColor:function(e){var t=this;t.containerBgColor=e||t.containerBgColor,t.container.style.backgroundColor=t.containerBgColor},setContainerBgImg:function(e,t){var i=this;switch(i.container.style.backgroundImage="url("+e+")",t){case"center":i.container.style.backgroundRepeat="no-repeat",i.container.style.backgroundPosition="center";break;case"full":i.container.style.backgroundSize=i.width+"px "+i.height+"px"}},clean:function(){var e=this;e.container.removeChild(e.canvas),e.container.parentNode.removeChild(e.container),e.canvas=e.container=e.ctx=null},update:function(){for(var e,t=this,i=t.displayObjectList,a=i.length,n=0;a>n;n++)e=t.displayObjectList[n].status,(1===e||2===e)&&this.displayObjectList[n].update()},render:function(){var e=this;e.clear(),e.fire("Stage:beforeRender",{data:{}}),this.sortDisplayObject(),this.renderDisplayObject(),e.fire("Stage:afterRender",{data:{}})},renderDisplayObject:function(){var e,t=this,i=t.displayObjectList,a=i.length;t.ctx.save();for(var n=0;a>n;n++)e=t.displayObjectList[n].status,(1===e||3===e)&&t.displayObjectList[n].render(t.ctx);t.ctx.restore()},sortDisplayObject:function(){this.displayObjectList.sort(function(e,t){return e.zIndex-t.zIndex})},getDisplayObjectList:function(){return this.displayObjectList},getDisplayObjectByName:function(e){return this.displayObjects[e]},createDisplayObject:function(e){var t=new n(e);return this.addDisplayObject(t),t},addDisplayObject:function(e){var t=this;t.getDisplayObjectByName(e.name)||(e.stageOwner=t,t.displayObjectList.push(e),t.displayObjects[e.name]=e)},removeDisplayObject:function(e){this.removeDisplayObjectByName(e.name)},removeDisplayObjectByName:function(e){var t=this,i=t.displayObjects[e];if(i){delete t.displayObjects[i.name];var n=t.displayObjectList;a.removeArrByCondition(n,function(t){return t.name===e})}},clearAllDisplayObject:function(){this.displayObjectList=[],this.displayObjects={}}},a.inherits(t,i),t}),i("ig/DisplayObject",["require","./Event","./util"],function(e){function t(e){var t=this;e=e||{},i.apply(t,arguments),t.name=null===e.name||void 0===e.name?"ig_displayobject_"+n++:e.name,t.stageOwner=null,t.x=e.x||0,t.y=e.y||0,t.width=e.width||0,t.height=e.height||0,t.radius=e.radius||0,t.scale=e.scale||1,t.angle=e.angle||0,t.alpha=e.alpha||1,t.zIndex=e.zIndex||0,t.fillStyle=e.fillStyle||null,t.strokeStyle=e.strokeStyle||null,t.image=e.image||null,t.vX=e.vX||0,t.vY=e.vY||0,t.aX=e.aX||0,t.aY=e.aY||0,t.reverseVX=!1,t.reverseVY=!1,t.status=1,t.customProp=e.customProp||{},t.debug=!1,t.setPos(t.x,t.y)}var i=e("./Event"),a=e("./util"),n=0;return t.prototype={constructor:t,setPos:function(e,t){var i=this;i.x=e||i.x,i.y=t||i.y},move:function(e,t){var i=this;i.x+=e,i.y+=t},moveStep:function(){var e=this;e.vX+=e.aX,e.vY+=e.aY,e.x+=e.vX,e.y+=e.vY},rotate:function(e){this.angle=e},update:function(){return!0},render:function(){return!0},isHit:function(e){var t=this,i=t.x>e.x?t.x:e.x,a=t.x+t.width<e.x+e.width?t.x+t.width:e.x+e.width,n=t.y>e.y?t.y:e.y,r=t.y+t.width<e.y+e.width?t.y+t.width:e.y+e.width;return a>=i&&r>=n}},a.inherits(t,i),t}),i("ig/Shape/Ball",["require","../util","../DisplayObject"],function(e){function t(){var e=this;a.apply(e,arguments)}var i=e("../util"),a=e("../DisplayObject");return t.prototype={constructor:t,update:function(){},render:function(e){e.beginPath(),e.fillStyle=this.color,e.arc(this.x,this.y,this.radius-3,0,2*Math.PI),e.fill(),e.lineWidth=2,e.beginPath(),e.strokeStyle="white",e.arc(this.x,this.y,this.radius,0,2*Math.PI),e.stroke(),t.superClass.render.apply(this,arguments)}},i.inherits(t,a),t});var a=t("ig"),n="ig/util",r="util",o="";if(o){var s={};s[r]=t(n),a[o]=s}else a[r]=t(n);var n="ig/Event",r="Event",o="";if(o){var s={};s[r]=t(n),a[o]=s}else a[r]=t(n);var n="ig/platform",r="env",o="";if(o){var s={};s[r]=t(n),a[o]=s}else a[r]=t(n);var n="ig/ImageLoader",r="ImageLoader",o="";if(o){var s={};s[r]=t(n),a[o]=s}else a[r]=t(n);var n="ig/Game",r="Game",o="";if(o){var s={};s[r]=t(n),a[o]=s}else a[r]=t(n);var n="ig/FrameMonitor",r="FrameMonitor",o="";if(o){var s={};s[r]=t(n),a[o]=s}else a[r]=t(n);var n="ig/Stage",r="Stage",o="";if(o){var s={};s[r]=t(n),a[o]=s}else a[r]=t(n);var n="ig/DisplayObject",r="DisplayObject",o="";if(o){var s={};s[r]=t(n),a[o]=s}else a[r]=t(n);var n="ig/Shape/Ball",r="Ball",o="Shape";if(o){var s={};s[r]=t(n),a[o]=s}else a[r]=t(n);e.ig=a}(window);